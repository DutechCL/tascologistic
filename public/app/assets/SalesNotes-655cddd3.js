import{s as Q,a as ae}from"./tabpanel.esm-0f79adc6.js";import{b as r,h as R,o as d,i as c,w as n,f as l,g as k,t as F,a,u as e,s as w,j as W,c as P,F as q,k as le,l as te,m as oe,p as se,r as re,q as $,v as ie}from"./index-34c0a65e.js";import{a as L,b as E,s as i,c as J}from"./tag.esm-85e42712.js";import{_ as X,s as h}from"./multiselect.esm-436ae51c.js";import{u as B}from"./OrdersApiService-acc79d37.js";import"./index.esm-6c4fd1f5.js";const de=l("h1",{class:"mb-1 text-primary-900 font-inter font-semibold text-xl"},[l("i",{class:"pi pi-eye !text-xl"}),k(" Ver Documentos ")],-1),ne={class:"flex align-center mb-2"},ue={class:"text-primary-900"},ce=l("strong",{class:"mr-3 font-semibold"},"Nota de venta N°",-1),me=l("div",{class:"mt-5"},[l("p",null," 2 archivos adjuntos "),l("div",{class:"flex"},[l("div",{class:"mt-2 mr-5",width:"200",height:"180"},[l("embed",{class:"w-full",src:"http://ocw.uv.es/ingenieria-y-arquitectura/programacionmultimedia/t2-1-css.pdf",type:"application/pdf"}),l("div",{class:"bg-gray-100"},[l("i",{class:"pi pi-file-pdf m-2",style:{color:"#F40F02"}}),l("a",{href:"#",class:"font-normal text-sm"},"Nombre de pdf")])]),l("div",{class:"mt-2 mr-5",width:"200",height:"180"},[l("embed",{class:"w-full",src:"http://ocw.uv.es/ingenieria-y-arquitectura/programacionmultimedia/t2-1-css.pdf",type:"application/pdf"}),l("div",{class:"bg-gray-100"},[l("i",{class:"pi pi-file-pdf m-2",style:{color:"#F40F02"}}),l("a",{href:"#",class:"font-normal text-sm"},"Nombre de pdf")])])])],-1),Y={__name:"DialogDetail",props:{order:String},setup(N){const b=N,v=r([]);return R(()=>{v.value=b.order}),(p,f)=>(d(),c(e(W),{modal:"",header:" ",style:{width:"70vw"}},{default:n(()=>[l("div",null,[de,l("div",ne,[l("p",ue,[ce,k(F(v.value.DocNum),1)]),a(e(L),{icon:"pi pi-shopping-bag",value:v.value.MethodShippingName,class:"ml-3 tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),a(e(L),{icon:"pi pi-user",value:v.value.Customer.CardName,class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"]),me]),a(e(w),{label:"Cerrar",onClick:f[0]||(f[0]=y=>p.visible=!1),class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}},pe=l("h1",{class:"mb-1 text-primary-900 font-inter font-semibold text-xl"},[l("i",{class:"pi pi-eye !text-xl"}),k(" Ver observaciones ")],-1),ve={class:"flex align-center mb-2"},fe={class:"text-primary-900"},he=l("strong",{class:"mr-3 font-semibold"},"Nota de venta N°",-1),ye={class:"mt-5"},be=l("strong",null,"NOTA:",-1),ge=["innerHTML"],xe={__name:"DialogDetailObservation",props:{order:String},setup(N,{emit:b}){const v=N,p=r([]);R(()=>{p.value=v.order});const f=()=>{b("visible",{visibleObservation:!1})},y=D=>D.replace(/\r/g,"<br>").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");return(D,g)=>(d(),c(e(W),{modal:"",header:" ",style:{width:"70vw"}},{default:n(()=>[l("div",null,[pe,l("div",ve,[l("p",fe,[he,k(F(p.value.DocNum),1)]),a(e(L),{icon:"pi pi-shopping-cart",value:p.value.MethodShippingName,class:"ml-3 tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),a(e(L),{icon:"pi pi-user",value:p.value.Customer.CardName,class:"tag-radius tag-rounded-blue tag-font-method mb-5"},null,8,["value"]),a(e(E),{tableStyle:"min-width: 50rem",filters:"filters",value:p.value.OrderItems},{default:n(()=>[a(e(i),{headerClass:"!bg-primary-900",field:"Quantity",header:"Cantidad"},{body:n(x=>[l("p",null,F(x.data.Quantity)+" Unidad",1)]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"ItemCode",header:"SKU"}),a(e(i),{headerClass:"!bg-primary-900",field:"ItemDescription",header:"Producto"}),a(e(i),{headerClass:"!bg-primary-900",field:"Problems",header:"Problema"},{body:n(x=>[(d(!0),P(q,null,le(x.data.Problems,(C,V)=>(d(),c(e(L),{key:V,value:C.ProblemName,rounded:"",class:"mr-3 tag-radius tag-rounded-blue tag-font-method"},null,8,["value"]))),128))]),_:1})]),_:1},8,["value"]),l("div",ye,[be,k(),l("span",{innerHTML:y(p.value.Comments)},null,8,ge)])]),a(e(w),{label:"Cerrar",onClick:f,class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}};const _e={class:"flex justify-between"},De=l("div",null,[l("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"}," Notas de venta ")],-1),Ce={key:0},we=l("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Aquí ",-1),Ve={class:"flex"},Ne={class:"card flex justify-content-center"},Se={class:"card flex justify-content-center"},Le={class:"card flex justify-content-center"},ke={class:"card flex justify-content-center mr-5"},Te={class:"card flex justify-content-center"},$e=l("div",null,[l("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Retiro / Despacho ")],-1),Me={class:"flex"},Oe={class:"card flex justify-content-center"},Ue={class:"card flex justify-content-center"},je={class:"card flex justify-content-center"},Ie={class:"card flex justify-content-center mr-5"},Fe={class:"card flex justify-content-center"},I=1,He={__name:"ToManage",props:{ListOrders:Array},setup(N){const b=N,v=te(),p=oe(),f=B(),y=r(!1),D=r(!1),g=r({}),x=r(!1),C=r([]),V=r([]),T=r([]),M=r([]),O=r([]),_=s=>{D.value=s.visibleObservation},m=r(b.ListOrders.filter(s=>s.MethodShippingId===I)),u=r(b.ListOrders.filter(s=>s.MethodShippingId!==I)),U=r(m.value),H=r(u.value);se(C,s=>{s.length===0?(u.value=b.ListOrders.filter(o=>o.MethodShippingId!==I),m.value=b.ListOrders.filter(o=>o.MethodShippingId===I)):(u.value=s.filter(o=>o.MethodShippingId!==I),m.value=s.filter(o=>o.MethodShippingId===I))});const G=s=>{g.value={...s},D.value=!0,x.value=!0},Z=s=>{y.value=!0,g.value={...s},x.value=!0},K=s=>{s||(g.value={},x.value=!1)},A=r(!1),z=async s=>{A.value=!0;try{const{first:o,rows:j}=s,t=await f.getOrders({offset:o,limit:j});m.value=[...m.value,...t]}catch(o){console.error("Error al cargar más datos",o)}finally{A.value=!1}},ee=async s=>{v.require({message:"¿Estas seguro que deseas continuar?",header:"Confirmación",icon:"pi pi-exclamation-triangle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",acceptLabel:"Si",rejectLabel:"No",accept:async()=>{let o=await f.postActionOrder(s.id,1);if(console.log(o),p.add({severity:o.status,summary:"",detail:o.message,life:3e3}),o.status==="success"){const j=u.value.findIndex(t=>t===s);j!==-1&&u.value.splice(j,1)}},reject:()=>{}})};return(s,o)=>{const j=re("Toast");return d(),P(q,null,[l("div",_e,[De,a(X)]),m.value.length>0?(d(),P("div",Ce,[we,l("div",Ve,[l("div",Ne,[(d(),c(e(h),{modelValue:C.value,"onUpdate:modelValue":o[0]||(o[0]=t=>C.value=t),options:U.value,filter:"",optionLabel:"DocNum",placeholder:"Nota de venta",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:s.DocNum},null,8,["modelValue","options"]))]),l("div",Se,[(d(),c(e(h),{modelValue:V.value,"onUpdate:modelValue":o[1]||(o[1]=t=>V.value=t),options:U.value,filter:"",optionLabel:"DocDate",placeholder:"Fecha",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:s.DocDate},null,8,["modelValue","options"]))]),l("div",Le,[(d(),c(e(h),{modelValue:T.value,"onUpdate:modelValue":o[2]||(o[2]=t=>T.value=t),options:U.value,filter:"",optionLabel:"DocTime",placeholder:"Hora",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:s.DocTime},null,8,["modelValue","options"]))]),l("div",ke,[a(e(h),{modelValue:M.value,"onUpdate:modelValue":o[3]||(o[3]=t=>M.value=t),options:U.value,filter:"",optionLabel:"Customer.CardName",placeholder:"Clientes",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"}},null,8,["modelValue","options"])]),l("div",Te,[(d(),c(e(h),{modelValue:O.value,"onUpdate:modelValue":o[4]||(o[4]=t=>O.value=t),options:U.value,filter:"",optionLabel:"DocTotal",placeholder:"Total",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:s.DocTotal},null,8,["modelValue","options"]))])]),a(e(E),{onOnPage:z,class:"mb-20",value:m.value,tableStyle:"min-width: 50rem",filters:"filters",paginator:"",rows:5,dataKey:"id",filterDisplay:"row",loading:A.value},{default:n(()=>[a(e(i),{headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:n(t=>[k(" N° "+F(t.data.DocNum),1)]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"DocDate",header:"Fecha"}),a(e(i),{headerClass:"!bg-primary-900",field:"DocTime",header:"Hora"}),a(e(i),{headerClass:"!bg-primary-900",field:"Customer.CardName",header:"Cliente"}),a(e(i),{headerClass:"!bg-primary-900",field:"DocTotal",header:"Monto total"},{body:n(t=>[a(e(J),{modelValue:t.data.DocTotal,"onUpdate:modelValue":S=>t.data.DocTotal=S,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"MethodShippingName",header:"Método entrega"},{body:n(t=>[a(e(L),{Tag:"",icon:"pi pi-shopping-cart",value:t.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"note",header:" Observación"},{body:n(t=>[a(e(w),{icon:"pi pi-eye",onClick:S=>G(t.data),class:"!font-normal !text-primary-900",label:"Ver observación",link:""},null,8,["onClick"])]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"note",header:""},{body:n(t=>[a(e(w),{label:"Informado",class:"!py-1.5 !border-primary-900 !text-primary-900",outlined:""})]),_:1})]),_:1},8,["value","loading"])])):$("",!0),$e,l("div",Me,[l("div",Oe,[(d(),c(e(h),{modelValue:C.value,"onUpdate:modelValue":o[5]||(o[5]=t=>C.value=t),options:H.value,filter:"",optionLabel:"DocNum",placeholder:"Nota de venta",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:s.DocNum},null,8,["modelValue","options"]))]),l("div",Ue,[(d(),c(e(h),{modelValue:V.value,"onUpdate:modelValue":o[6]||(o[6]=t=>V.value=t),options:H.value,filter:"",optionLabel:"DocDate",placeholder:"Fecha",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:s.DocDate},null,8,["modelValue","options"]))]),l("div",je,[(d(),c(e(h),{modelValue:T.value,"onUpdate:modelValue":o[7]||(o[7]=t=>T.value=t),options:H.value,filter:"",optionLabel:"DocTime",placeholder:"Hora",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:s.DocTime},null,8,["modelValue","options"]))]),l("div",Ie,[a(e(h),{modelValue:M.value,"onUpdate:modelValue":o[8]||(o[8]=t=>M.value=t),options:H.value,filter:"",optionLabel:"Customer.CardName",placeholder:"Clientes",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"}},null,8,["modelValue","options"])]),l("div",Fe,[(d(),c(e(h),{modelValue:O.value,"onUpdate:modelValue":o[9]||(o[9]=t=>O.value=t),options:H.value,filter:"",optionLabel:"DocTotal",placeholder:"Total",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:s.DocTotal},null,8,["modelValue","options"]))])]),a(e(E),{onOnPage:z,value:u.value,tableStyle:"min-width: 50rem",filters:"filters",paginator:"",rows:5,dataKey:"id",filterDisplay:"row",loading:A.value},{default:n(()=>[a(e(i),{headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:n(t=>[k(" N° "+F(t.data.DocNum),1)]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"DocDate",header:"Fecha"}),a(e(i),{headerClass:"!bg-primary-900",field:"DocTime",header:"Hora"}),a(e(i),{headerClass:"!bg-primary-900",field:"Customer.CardName",header:"Cliente"}),a(e(i),{headerClass:"!bg-primary-900",field:"DocTotal",header:"Monto total"},{body:n(t=>[a(e(J),{modelValue:t.data.DocTotal,"onUpdate:modelValue":S=>t.data.DocTotal=S,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"MethodShippingName",header:"Método entrega"},{body:n(t=>[a(e(L),{Tag:"",icon:"pi pi-shopping-cart",value:t.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"note",header:"Documentos"},{body:n(t=>[a(e(w),{icon:"pi pi-eye",onClick:S=>Z(t.data),class:"!font-normal !text-primary-900",label:"Ver documentos",link:""},null,8,["onClick"])]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"note",header:" Observación"},{body:n(t=>[t.data.OrderStatusId==4?(d(),c(e(w),{key:0,icon:"pi pi-eye",onClick:S=>G(t.data),class:"!font-normal !text-primary-900",label:"Ver observación",link:""},null,8,["onClick"])):$("",!0)]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"note",header:""},{body:n(t=>[a(e(w),{label:"Rechazar",onClick:o[10]||(o[10]=S=>s.visibleReport=!0),class:"!py-1.5 mr-3 !border-primary-900 !text-primary-900",outlined:""}),a(e(w),{label:"Autorizar",onClick:S=>ee(t.data),class:"!py-1.5 !border-primary-900 !text-primary-900",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","loading"]),x.value?(d(),c(Y,{visible:y.value,"onUpdate:visible":[o[11]||(o[11]=t=>y.value=t),K],order:g.value,key:g.value.timestamp},null,8,["visible","order"])):$("",!0),x.value?(d(),c(xe,{visible:D.value,"onUpdate:visible":[o[12]||(o[12]=t=>D.value=t),K],order:g.value,key:g.value.timestamp,onVisible:_},null,8,["visible","order"])):$("",!0),a(j),a(e(ie))],64)}}};const Pe={class:"flex justify-between"},Ae=l("div",null,[l("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"}," Notas de venta "),l("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Retiro / Despacho ")],-1),Ee={class:"flex"},Re={class:"card flex justify-content-center"},qe={class:"card flex justify-content-center"},Be={class:"card flex justify-content-center"},Ge={class:"card flex justify-content-center mr-5"},Ke={class:"card flex justify-content-center"},ze=1,Qe={__name:"Managed",props:{ListordersManager:Array},setup(N){const b=N;B();const v=r(!1),p=r({}),f=r(!1),y=r([]),D=r([]),g=r([]),x=r([]),C=r([]),V=r([]),T=r(b.ListordersManager.filter(_=>_.MethodShippingId!==ze));y.value=T.value;const M=_=>{v.value=!0,p.value={..._},f.value=!0},O=_=>{_||(p.value={},f.value=!1)};return(_,m)=>(d(),P(q,null,[l("div",Pe,[Ae,a(X)]),l("div",Ee,[l("div",Re,[(d(),c(e(h),{modelValue:D.value,"onUpdate:modelValue":m[0]||(m[0]=u=>D.value=u),options:y.value,filter:"",optionLabel:"DocNum",placeholder:"Nota de venta",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:_.DocNum},null,8,["modelValue","options"]))]),l("div",qe,[(d(),c(e(h),{modelValue:g.value,"onUpdate:modelValue":m[1]||(m[1]=u=>g.value=u),options:y.value,filter:"",optionLabel:"DocDate",placeholder:"Fecha",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:_.DocDate},null,8,["modelValue","options"]))]),l("div",Be,[(d(),c(e(h),{modelValue:x.value,"onUpdate:modelValue":m[2]||(m[2]=u=>x.value=u),options:y.value,filter:"",optionLabel:"DocTime",placeholder:"Hora",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:_.DocTime},null,8,["modelValue","options"]))]),l("div",Ge,[a(e(h),{modelValue:C.value,"onUpdate:modelValue":m[3]||(m[3]=u=>C.value=u),options:y.value,filter:"",optionLabel:"Customer.CardName",placeholder:"Clientes",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"}},null,8,["modelValue","options"])]),l("div",Ke,[(d(),c(e(h),{modelValue:V.value,"onUpdate:modelValue":m[4]||(m[4]=u=>V.value=u),options:y.value,filter:"",optionLabel:"DocTotal",placeholder:"Total",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:_.DocTotal},null,8,["modelValue","options"]))])]),a(e(E),{class:"mb-20",value:T.value,tableStyle:"min-width: 50rem"},{default:n(()=>[a(e(i),{headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:n(u=>[k(" N° "+F(u.data.DocNum),1)]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"DocDate",header:"Fecha"}),a(e(i),{headerClass:"!bg-primary-900",field:"DocTime",header:"Hora"}),a(e(i),{headerClass:"!bg-primary-900",field:"Customer.CardName",header:"Cliente"}),a(e(i),{headerClass:"!bg-primary-900",field:"DocTotal",header:"Monto total"}),a(e(i),{headerClass:"!bg-primary-900",field:"MethodShippingName",header:"Método entrega"},{body:n(u=>[a(e(L),{Tag:"",icon:"pi pi-shopping-cart",value:u.data.MethodShippingName,rounded:"",class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"note",header:"Observaciones"},{body:n(u=>[a(e(w),{icon:"pi pi-eye",onClick:U=>M(u.data),class:"!font-normal !text-primary-900",label:"Ver Observaciones",link:""},null,8,["onClick"])]),_:1}),a(e(i),{headerClass:"!bg-primary-900",field:"note",header:""},{body:n(u=>[a(e(w),{label:"Informado",class:"!py-1.5 !border-primary-900 !text-primary-900",outlined:""})]),_:1})]),_:1},8,["value"]),f.value?(d(),c(Y,{visible:v.value,"onUpdate:visible":[m[5]||(m[5]=u=>v.value=u),O],order:p.value,key:p.value.timestamp},null,8,["visible","order"])):$("",!0)],64))}};const Je={class:"px-3"},la={__name:"SalesNotes",setup(N){const b=B(),v=r([]),p=r([]);r([]);const f=r(!1);return R(async()=>{v.value=await b.getOrders(),p.value=await b.getProcessedOrders(),f.value=!0}),(y,D)=>(d(),P("div",Je,[a(e(ae),null,{default:n(()=>[a(e(Q),{header:"Por gestionar"},{default:n(()=>[f.value?(d(),c(He,{key:0,ListOrders:v.value},null,8,["ListOrders"])):$("",!0)]),_:1}),a(e(Q),{header:"Gestionadas"},{default:n(()=>[f.value?(d(),c(Qe,{key:0,ListordersManager:p.value},null,8,["ListordersManager"])):$("",!0)]),_:1})]),_:1})]))}};export{la as default};
