import{e as d,v as B,q as O,o as c,c as p,h as i,i as w,a as n,u as r,k,p as u,F as E,s as N,x as S}from"./index-852ef975.js";import{T as C,C as M,_ as V,c as m}from"./ConfirmMixin-9fbefe8d.js";import{u as I,_ as T,a as L}from"./DataTableOrders-4779a80a.js";import"./tag.esm-ecc1724b.js";import"./index.esm-e809303e.js";import"./OrdersApiService-53733010.js";import"./ApiService-1a814c3e.js";import"./_commonjsHelpers-725317a4.js";import"./FilterMultiSelect-b252984c.js";import"./index.esm-52d65e91.js";import"./index-dd28ee9b.js";const P={class:"px-8"},R={class:"flex justify-between"},$=i("i",{class:"pi pi-refresh"},null,-1),j=[$],F={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},H=i("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No hay ordenes actualmente en este proceso ",-1),ee={__name:"DispatchOrders",setup(q){const{showToast:l}=C.setup(),{showConfirm:_}=M.setup(),e=I(),h=d(!1),t=d([]),f=s=>{t.value=s.orders},v=s=>{switch(s.method){case"showDetailOrder":e.showDetailOrder(s.order);break;case"processOrderBiller":b(s);break}},y=async()=>{await e.getOrdersBillDelivery(),l({status:"success",message:"Ordenes actualizadas",time:3e3})};B(()=>e.orders,s=>{t.value=e.orders});const g=()=>{t.value.length===0&&(window.location.href="/admin/dashboard/")},b=async s=>{try{if(await _()){let o=await e.processOrderBiller(s);o.status==="success"&&(t.value.filter(D=>D.id!==o.data.id),l({status:"success",message:o.message}))}else l({status:"info",message:"Proceso cancelado"})}catch(a){a.response.status==401&&(console.log(t.value,a.response.data.data),t.value.filter(o=>o.id!==a.response.data.data.id)),l({status:"error",message:a.response.data.message})}},x=s=>{h.value=s.visibleDetails};return O(async()=>{await e.getOrdersBillDelivery(),t.value=e.orders}),(s,a)=>(c(),p(E,null,[i("div",P,[i("div",R,[i("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-2xl"},[w(" Despacho "),i("a",{style:{cursor:"pointer"},onClick:y},j)]),n(V,{type:r(m).RESPONSIBLE_BILLER,methodShipping:r(m).METHOD_SHIPPING_DELIVERY,orders:r(e).orders,onSearch:f},null,8,["type","methodShipping","orders"])]),n(T,{orders:t.value,actions:s.actions,onAction:v},null,8,["orders","actions"]),r(e).visibleDialog?(c(),k(L,{key:0,visible:r(e).visibleDialog,"onUpdate:visible":a[0]||(a[0]=o=>r(e).visibleDialog=o),orderDetails:r(e).order,onVisible:x},null,8,["visible","orderDetails"])):u("",!0),t.value.length===0?(c(),p("div",F,[H,n(r(N),{label:"Regresar",severity:"primary",outlined:"",onClick:g,class:"ml-3 !py-1.5"})])):u("",!0)]),n(r(S))],64))}};export{ee as default};
