import{e as O,v as x,q as k,o as c,c as d,h as o,i as B,a as n,u as t,k as w,p as u,F as D,s as P,x as E}from"./index-0e0dd738.js";import{T as N,C as S,_ as C,c as p}from"./ConfirmMixin-65895b19.js";import{u as M,_ as H,a as R}from"./DataTableOrders-3b08c00b.js";import"./tag.esm-e52f1ac9.js";import"./index.esm-65dfac2c.js";import"./OrdersApiService-dbc137f4.js";import"./ApiService-85defb40.js";import"./_commonjsHelpers-725317a4.js";import"./FilterMultiSelect-4a030643.js";import"./index.esm-0ce580de.js";import"./index-dd28ee9b.js";const T={class:"px-8"},V={class:"flex justify-between"},A=o("i",{class:"pi pi-refresh"},null,-1),I=[A],$={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},L=o("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No hay ordenes actualmente en este proceso ",-1),Z={__name:"PickupOrders",setup(j){const{showToast:l}=N.setup(),{showConfirm:m}=S.setup(),e=M(),r=O([]),_=async()=>{await e.getOrdersBillPickupAndHere(),l({status:"success",message:"Ordenes actualizadas",time:3e3})};x(()=>e.listOrders,s=>{r.value=e.listOrders});const f=s=>{r.value=s.orders},h=s=>{switch(s.method){case"showDetailOrder":e.showDetailOrder(s.order);break;case"processOrderBiller":v(s);break}},v=async s=>{try{if(await m()){let a=await e.processOrderBiller(s);a.status==="success"&&(r.value.filter(b=>b.id!==a.data.id),l({status:"success",message:a.message}))}else l({status:"info",message:"Proceso cancelado"})}catch(i){i.response.status==401&&r.value.filter(a=>a.id!==i.response.data.data.id),l({status:"error",message:i.response.data.message})}},g=s=>{e.visibleDialog=s.visibleDetails};k(async()=>{await e.getOrdersBillPickupAndHere(),r.value=e.listOrders});const y=()=>{r.value.length===0&&(window.location.href="/admin/dashboard/")};return(s,i)=>(c(),d(D,null,[o("div",T,[o("div",V,[o("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-2xl"},[B(" Retira / AquÃ­ "),o("a",{style:{cursor:"pointer"},onClick:_},I)]),n(C,{type:t(p).RESPONSIBLE_BILLER,methodShipping:t(p).METHOD_SHIPPING_HERE,orders:t(e).listOrders,onSearch:f},null,8,["type","methodShipping","orders"])]),n(H,{orders:r.value,actions:s.actions,onAction:h},null,8,["orders","actions"]),t(e).visibleDialog?(c(),w(R,{key:0,visible:t(e).visibleDialog,"onUpdate:visible":i[0]||(i[0]=a=>t(e).visibleDialog=a),orderDetails:t(e).order,onVisible:g},null,8,["visible","orderDetails"])):u("",!0),r.value.length===0?(c(),d("div",$,[L,n(t(P),{label:"Regresar",severity:"primary",outlined:"",onClick:y,class:"ml-3 !py-1.5"})])):u("",!0)]),n(t(E))],64))}};export{Z as default};
