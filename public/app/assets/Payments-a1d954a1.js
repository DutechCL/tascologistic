import{s as A,a as ee}from"./tabpanel.esm-5d7b378f.js";import{u as T,T as B,C as H,c as E,_ as K}from"./ConfirmMixin-1fbce134.js";import{O as te,B as ae,o as n,c as m,h as s,E as $,e as b,q as j,v as F,k as _,w as f,u as a,t as w,p as u,i as D,a as d,s as V,F as S,l as L,m as oe,f as G}from"./index-4352535e.js";import{c as re,d as ne,s as P,a as M,e as R,b as z}from"./tag.esm-cdfa0061.js";import{_ as se}from"./FilterMultiSelect-46b006dc.js";import"./index.esm-07950154.js";import"./OrdersApiService-7d35ab2b.js";import"./ApiService-ba9a4109.js";import"./_commonjsHelpers-725317a4.js";import"./index.esm-477ec446.js";import"./index-dd28ee9b.js";var le={root:function(e){var o=e.instance,r=e.props;return["p-radiobutton p-component",{"p-radiobutton-checked":o.checked,"p-radiobutton-disabled":r.disabled,"p-radiobutton-focused":o.focused}]},input:function(e){var o=e.instance,r=e.props;return["p-radiobutton-box",{"p-highlight":o.checked,"p-disabled":r.disabled,"p-focus":o.focused}]},icon:"p-radiobutton-icon"},ie={name:"BaseRadioButton",extends:ae,props:{value:null,modelValue:null,name:{type:String,default:null},disabled:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},css:{classes:le},provide:function(){return{$parentInstance:this}}},W={name:"RadioButton",extends:ie,emits:["click","update:modelValue","change","focus","blur"],data:function(){return{focused:!1}},methods:{onClick:function(e){this.disabled||(this.$emit("click",e),this.$emit("update:modelValue",this.value),this.$refs.input.focus(),this.checked||this.$emit("change",e))},onFocus:function(e){this.focused=!0,this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.$emit("blur",e)}},computed:{checked:function(){return this.modelValue!=null&&te.equals(this.modelValue,this.value)}}};function O(t){"@babel/helpers - typeof";return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(t)}function U(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(p){return Object.getOwnPropertyDescriptor(t,p).enumerable})),o.push.apply(o,r)}return o}function q(t){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?U(Object(o),!0).forEach(function(r){ue(t,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):U(Object(o)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))})}return t}function ue(t,e,o){return e=de(e),e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function de(t){var e=ce(t,"string");return O(e)==="symbol"?e:String(e)}function ce(t,e){if(O(t)!=="object"||t===null)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var r=o.call(t,e||"default");if(O(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pe=["id","name","checked","disabled","value","aria-labelledby","aria-label"],me=["data-p-highlight","data-p-disabled","data-p-focused"];function ye(t,e,o,r,p,l){return n(),m("div",$({class:t.cx("root"),onClick:e[2]||(e[2]=function(C){return l.onClick(C)})},t.ptm("root"),{"data-pc-name":"radiobutton"}),[s("div",$({class:"p-hidden-accessible"},t.ptm("hiddenInputWrapper"),{"data-p-hidden-accessible":!0}),[s("input",$({ref:"input",id:t.inputId,type:"radio",name:t.name,checked:l.checked,disabled:t.disabled,value:t.value,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,onFocus:e[0]||(e[0]=function(){return l.onFocus&&l.onFocus.apply(l,arguments)}),onBlur:e[1]||(e[1]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)})},t.ptm("hiddenInput")),null,16,pe)],16),s("div",$({ref:"box",class:[t.cx("input"),t.inputClass],style:t.inputStyle},q(q({},t.inputProps),t.ptm("input")),{"data-p-highlight":l.checked,"data-p-disabled":t.disabled,"data-p-focused":p.focused}),[s("div",$({class:t.cx("icon")},t.ptm("icon")),null,16)],16,me)],16)}W.render=ye;const be=s("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"},[s("i",{class:"pi pi-info-circle rotate-180 !text-xl"}),D(" Medios de pago ")],-1),he={key:0,class:"mb-4 text-primary-900 font-inter font-medium text-md"},fe={class:"flex justify-between",style:{width:"80%"}},ve={class:"mt-2 mb-1",style:{"max-width":"300px !important"}},ge={key:0},_e={class:"text-primary-900 font-semi-bold"},ke={key:1},Ce={class:"text-primary-900 font-semi-bold"},Pe={key:0,class:"mt-2 mb-1"},xe={class:"text-primary-900 font-semi-bold"},we={key:1,class:"mt-2 mb-1"},De={class:"text-primary-900 font-semi-bold"},Ne={class:"mt-4 flex justify-between align-center"},Me={class:"w-9/12"},Se=s("p",{class:"mb-1"},"Selecciona el método de pago",-1),$e={key:0},Oe=s("p",{class:"py-5"},"Aquí puedes navegar a través de los métodos de pagos",-1),Te={class:"grid grid-cols-5"},Ie=["for"],Ee=["onClick"],Ve={key:1,class:"py-8"},Be={class:"grid grid-cols-2"},Fe=["for"],Y={__name:"DialogMethosPayment",setup(t){const e=T(),o=b(),r=b([]),p=b(""),l=b(""),C=b({}),k=b([{idMethod:2,name:"Transferencia",inputs:[{key:"methodTranfer-accountMayor",type:"number",label:"Cuenta de mayor"},{key:"methodTranfer-date",type:"date",label:"Fecha de transferencia"},{key:"methodTranfer-number",type:"number",label:"N° de transferencia"},{key:"methodTranfer-import",type:"number",label:"Importe total"}]},{idMethod:3,name:"Transbank - Webpay",inputs:[{key:"webpay-nameCard",type:"number",label:"Nombre de tajeta"},{key:"webpay-accountCardMayor",type:"number",label:"Cuenta de mayor"},{key:"webpay-numberCard",type:"number",label:"N° de la tarjeta"},{key:"webpay-validityFrom",type:"date",label:"Válido hasta"},{key:"webpay-day",type:"text",label:"N° Dia (D, B, G, C)"},{key:"webpay-quotas",type:"number",label:"Cantidad de cuotas"},{key:"webpay-quantityPayments",type:"number",label:"Cantidad de pagos"},{key:"webpay-documentCard",type:"text",label:"Partir documento de tarjeta"},{key:"webpay-firstPayment",type:"text",label:"Primer pago parcial"},{key:"webpay-aditionalPayment",type:"number",label:"Cada pago adicional"}]},{idMethod:4,name:"Cheque",inputs:[{key:"cheque-import",type:"number",label:"Importe"},{key:"cheque-date",type:"date",label:"Fecha de vencimiento"},{key:"cheque-bank",type:"select",label:"Banco"},{key:"cheque-number",type:"number",label:"N° de cheque"}]},{idMethod:5,name:"Efectivo",inputs:[{key:"efectivo-accountMayor",type:"number",label:"Cuenta de mayor"},{key:"efectivo-importTotal",type:"number",label:"Monto a pagar"}]},{idMethod:6,name:"Cuenta corriente",inputs:[{key:"cuentacorriente-accountClient",type:"number",label:"Código de cliente"},{key:"cuentacorriente-importTotal",type:"number",label:"Monto a pagar"}]},{idMethod:7,name:"Saldo a favor",inputs:[{key:"saldoafavor-date",type:"date",label:"Fecha del pago"},{key:"saldoafavor-importTotal",type:"number",label:"Monto a pagar"}]}]);function v(){const y={};k.value.forEach(g=>{y[g.idMethod]={},g.inputs.forEach(c=>{y[g.idMethod][c.key]=""})}),C.value=y}function h(y,g,c){C.value[y][g]=c}const i=y=>{r.value=r.value.filter(g=>g.idMethod!==y),l.value=""},x=()=>{o.value&&!r.value.some(y=>y.name===o.value.name)&&(r.value.push(o.value),o.value=null)},X=y=>{l.value=k.value.find(g=>g.idMethod===y)},J=async()=>{let y={};const g=[];r.value.forEach(c=>{const N={idMethod:c.idMethod,name:c.name,inputs:{}};c.inputs.forEach(I=>{N.inputs[I.key]=C.value[c.idMethod][I.key]}),g.push(N)}),y.orderId=e.order?e.order.id:null,y.customerId=e.customer?e.customer.id:null,y.paymentData=g,console.log(y)};return j(()=>{v()}),F(()=>[e.order,e.customer],y=>{y&&(o.value=null,r.value=[],p.value="",l.value="",v())}),(y,g)=>(n(),_(a(oe),{modal:"",header:" ",style:{width:"70vw"}},{default:f(()=>[s("div",null,[be,a(e).customer?u("",!0):(n(),m("p",he," Factura N° "+w(a(e).order.DocNum),1))]),s("div",fe,[s("div",ve,[a(e).customer?u("",!0):(n(),m("p",ge,[D("Cliente: "),s("span",_e,w(a(e).order.Customer.CardName),1)])),a(e).customer?(n(),m("p",ke,[D("Cliente: "),s("span",Ce,w(a(e).customer.CardName),1)])):u("",!0)]),a(e).customer?u("",!0):(n(),m("div",Pe,[s("p",null,[D("Monto total: "),s("span",xe,w(a(e).order.DocTotal),1)])])),a(e).customer?u("",!0):(n(),m("div",we,[s("p",null,[D("Fecha: "),s("span",De,w(a(e).order.DocDate),1)])]))]),s("div",Ne,[s("div",Me,[Se,d(a(re),{modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=c=>o.value=c),options:k.value,optionLabel:"name",placeholder:"Selecciona el método de pago",class:"w-full md:w-14rem"},null,8,["modelValue","options"])]),d(a(V),{icon:"pi pi-plus",label:"Agregar",class:"!py-2 !border-none !bg-primary-900",onClick:x})]),r.value.length>0?(n(),m("div",$e,[Oe,s("ul",Te,[(n(!0),m(S,null,L(r.value,c=>(n(),m("li",{class:"!bg-cyan-500 !mr-3 !p-3 flex justify-between shadow-lg",key:c.name},[d(a(W),{modelValue:p.value,"onUpdate:modelValue":g[1]||(g[1]=N=>p.value=N),inputId:c.idMethod,onChange:N=>X(c.idMethod),name:"method",value:c.name},null,8,["modelValue","inputId","onChange","value"]),s("label",{for:c.idMethod,class:"ml-2"},w(c.name),9,Ie),s("button",{onClick:N=>i(c.idMethod),class:"delete-btn"},"X",8,Ee)]))),128))])])):u("",!0),l.value?(n(),m("div",Ve,[s("div",Be,[(n(!0),m(S,null,L(l.value.inputs,({key:c,type:N,label:I},Q)=>(n(),m("div",{key:Q,class:"flex flex-col p-2"},[s("label",{for:c},w(I),9,Fe),d(a(ne),{type:N,name:c,id:c,value:C.value[l.value.idMethod][c],onInput:Z=>h(l.value.idMethod,c,Z.target.value)},null,8,["type","name","id","value","onInput"])]))),128))])])):u("",!0),d(a(V),{label:"Pagar",onClick:J,class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}};const je={key:0},Ae={class:"flex"},Le={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Re=s("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No se han encontrado ordenes ",-1),Ue=[Re],qe={__name:"DataTabletPayments",props:{orders:Array,filters:Array,column:Array},setup(t){const e=t,{showToast:o}=B.setup();H.setup();const r=T(),p=b([]);G(()=>{p.value=e.orders});const l=v=>{C(v),r.customer=null,r.order=v,r.showDialog=!0},C=async v=>{try{const h=await r.assignResponsible(v.id);o({status:h.status,message:h.message})}catch(h){o({status:h.response.data.status,message:h.response.data.message})}},k=v=>{p.value=v.orders};return F(()=>e.orders,v=>{p.value=v}),(v,h)=>(n(),m(S,null,[p.value.length>0?(n(),m("div",je,[s("div",Ae,[d(se,{allOrders:e.orders,typeOrders:e.type,onFilter:k,filters:t.filters},null,8,["allOrders","typeOrders","filters"])]),d(a(z),{value:p.value,rowsPerPageOptions:[5,10,20,50],rows:5,paginator:"",dataKey:"id",filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}"},{default:f(()=>[e.column.includes("DocEntry")?(n(),_(a(P),{key:0,sortable:"",headerClass:"!bg-primary-900",field:"DocEntry",header:"Factura"},{body:f(i=>[D(" N° "+w(i.data.DocEntry),1)]),_:1})):u("",!0),e.column.includes("DocNum")?(n(),_(a(P),{key:1,sortable:"",headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:f(i=>[D(" N° "+w(i.data.DocNum),1)]),_:1})):u("",!0),e.column.includes("Customer")?(n(),_(a(P),{key:2,sortable:"",headerClass:"!bg-primary-900",field:"Customer.CardName",header:"Cliente",style:{"max-width":"300px"}},{body:f(i=>[d(a(M),{icon:"pi pi-user",value:i.data.Customer.CardName,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1})):u("",!0),e.column.includes("NumAcount")?(n(),_(a(P),{key:3,sortable:"",headerClass:"!bg-primary-900",field:"NumAcount",header:"Cuenta"},{body:f(i=>[D(" N° "+w(i.data.DocNum),1)]),_:1})):u("",!0),e.column.includes("DocTotal")?(n(),_(a(P),{key:4,sortable:"",headerClass:"!bg-primary-900",field:"DocTotal",header:"Total"})):u("",!0),e.column.includes("SalesEmployeeName")?(n(),_(a(P),{key:5,sortable:"",headerClass:"!bg-primary-900",field:"SalesEmployeeName",header:"Vendedor"},{body:f(i=>[d(a(M),{icon:"pi pi-user",value:i.data.SalesEmployeeName,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1})):u("",!0),e.column.includes("MethodShippingName")?(n(),_(a(P),{key:6,sortable:"",headerClass:"!bg-primary-900",field:"MethodShippingName",header:"Entrega"},{body:f(i=>[i.data.method_shipping_id===a(E).METHOD_SHIPPING_HERE_ID?(n(),_(a(M),{key:0,Tag:"",icon:"pi pi-shopping-cart",value:i.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):u("",!0),i.data.method_shipping_id===a(E).METHOD_SHIPPING_PICKUP_ID?(n(),_(a(M),{key:1,Tag:"",icon:"pi pi-home",value:i.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):u("",!0),i.data.method_shipping_id===a(E).METHOD_SHIPPING_DELIVERY_ID?(n(),_(a(M),{key:2,Tag:"",icon:"pi pi-truck",value:i.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):u("",!0)]),_:1})):u("",!0),e.column.includes("credit")?(n(),_(a(P),{key:7,sortable:"",headerClass:"!bg-primary-900",field:"credit",header:"Crédito"},{body:f(i=>[d(a(R),{modelValue:i.data.credit,"onUpdate:modelValue":x=>i.data.credit=x,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):u("",!0),e.column.includes("positiveBalance")?(n(),_(a(P),{key:8,sortable:"",headerClass:"!bg-primary-900",field:"positiveBalance",header:"Saldo a favor"},{body:f(i=>[d(a(R),{modelValue:i.data.positiveBalance,"onUpdate:modelValue":x=>i.data.positiveBalance=x,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):u("",!0),e.column.includes("actions")?(n(),_(a(P),{key:9,headerClass:"!bg-primary-900",field:"actions",header:""},{body:f(i=>[d(a(V),{label:"Pagar",class:"!py-1.5 !border-primary-900 !text-primary-900 float-right",onClick:x=>l(i.data),outlined:""},null,8,["onClick"])]),_:1})):u("",!0)]),_:1},8,["value"])])):u("",!0),p.value.length===0?(n(),m("div",Le,Ue)):u("",!0)],64))}},He={class:"flex justify-between"},Ke=s("i",{class:"pi pi-refresh"},null,-1),Ge=[Ke],ze={__name:"PaymentDocNum",props:{orders:Array},setup(t){const{showToast:e}=B.setup(),o=T(),r=b(["DocEntry","DocNum","Customer"]),p=b(["DocEntry","DocNum","Customer","DocTotal","SalesEmployeeName","MethodShippingName","credit","positiveBalance","actions"]);b(!1);const l=b([]),C=b(!1);j(async()=>{await o.getOrdersPayment(),l.value=o.ordersPaymentsPending,C.value=!0});const k=h=>{l.value=h.orders},v=async()=>{await o.getOrdersPayment(),e({status:"success",title:"Ordenes actualizadas",message:"Las ordenes se han actualizado correctamente"})};return F(()=>o.ordersPaymentsPending,h=>{l.value=h}),(h,i)=>(n(),m(S,null,[s("div",He,[s("div",null,[s("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"},[D(" Facturas pendientes de pago "),s("a",{style:{cursor:"pointer"},onClick:v},Ge)])]),d(K,{type:a(E).RESPONSIBLE_PAYMENT,orders:a(o).ordersPaymentsPending,onSearch:k},null,8,["type","orders"])]),C.value?(n(),_(qe,{key:0,orders:l.value,filters:r.value,column:p.value,onAction:h.action},null,8,["orders","filters","column","onAction"])):u("",!0),d(Y,{visible:a(o).showDialog,"onUpdate:visible":i[0]||(i[0]=x=>a(o).showDialog=x)},null,8,["visible"])],64))}};const We={key:0},Ye={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Xe=s("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No se han encontrado clientes ",-1),Je=[Xe],Qe={__name:"DataTabletCustomers",props:{customers:Array,filters:Array,column:Array},setup(t){const e=t;B.setup(),H.setup();const o=T(),r=b([]);G(()=>{r.value=e.customers});const p=l=>{o.order=null,o.customer=l,o.showDialog=!0};return F(()=>e.customers,l=>{r.value=l}),(l,C)=>(n(),m(S,null,[r.value.length>0?(n(),m("div",We,[d(a(z),{value:r.value,rowsPerPageOptions:[5,10,20,50],rows:5,paginator:"",dataKey:"id",filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}"},{default:f(()=>[d(a(P),{sortable:"",headerClass:"!bg-primary-900",field:"CardName",header:"Cliente",style:{"max-width":"300px"}},{body:f(k=>[d(a(M),{icon:"pi pi-user",value:k.data.CardName,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1}),d(a(P),{sortable:"",headerClass:"!bg-primary-900",field:"CardCode",header:"N° Documento",style:{"max-width":"300px"}},{body:f(k=>[d(a(M),{icon:"pi pi-user",value:k.data.CardCode,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1}),e.column.includes("actions")?(n(),_(a(P),{key:0,headerClass:"!bg-primary-900",field:"actions",header:""},{body:f(k=>[d(a(V),{label:"Pagar",class:"!py-1.5 !border-primary-900 !text-primary-900 float-right",onClick:v=>p(k.data),outlined:""},null,8,["onClick"])]),_:1})):u("",!0)]),_:1},8,["value"])])):u("",!0),r.value.length===0?(n(),m("div",Ye,Je)):u("",!0)],64))}},Ze={class:"flex justify-between"},et=s("div",null,[s("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"}," Registrar pago a cuenta ")],-1),tt={__name:"PaymentAccount",setup(t){B.setup();const e=T(),o=b(["Customer","NumAcount"]),r=b(["Customer","NumAcount","actions"]),p=b(!1),l=b([]),C=b([]),k=b(!1);j(async()=>{await e.getCustomers(),l.value=e.customers,C.value=e.customers,k.value=!0});const v=h=>{l.value=h.customers};return(h,i)=>(n(),m(S,null,[s("div",Ze,[et,d(K,{type:"customers",customers:C.value,onSearch:v},null,8,["customers"])]),k.value?(n(),_(Qe,{key:0,customers:l.value,filters:o.value,column:r.value,onAction:h.action},null,8,["customers","filters","column","onAction"])):u("",!0),d(Y,{visible:p.value,"onUpdate:visible":i[0]||(i[0]=x=>p.value=x)},null,8,["visible"])],64))}};const at={class:"px-3"},yt={__name:"Payments",setup(t){return(e,o)=>(n(),m("div",at,[d(a(ee),null,{default:f(()=>[d(a(A),{header:"Facturas pendientes de pago"},{default:f(()=>[d(ze)]),_:1}),d(a(A),{header:"Registrar pago a cuenta"},{default:f(()=>[d(tt)]),_:1})]),_:1})]))}};export{yt as default};
