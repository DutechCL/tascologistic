import{e as d,v as B,q as O,o as c,c as p,h as i,i as w,a as n,u as t,k,p as u,F as E,s as N,x as S}from"./index-986f90dd.js";import{T as C,C as M,_ as V,c as m}from"./ConfirmMixin-3bc98181.js";import{u as I,_ as T,a as L}from"./DataTableOrders-3faa16fa.js";import"./tag.esm-5432cb61.js";import"./index.esm-9554e198.js";import"./OrdersApiService-6350dc48.js";import"./ApiService-f68c23fd.js";import"./_commonjsHelpers-725317a4.js";import"./FilterMultiSelect-eca588f2.js";import"./index.esm-8b7b4635.js";import"./index-dd28ee9b.js";const P={class:"px-8"},R={class:"flex justify-between"},$=i("i",{class:"pi pi-refresh"},null,-1),j=[$],F={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},H=i("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No hay ordenes actualmente en este proceso ",-1),ee={__name:"DispatchOrders",setup(q){const{showToast:l}=C.setup(),{showConfirm:_}=M.setup(),e=I(),h=d(!1),r=d([]),f=s=>{r.value=s.orders},v=s=>{switch(s.method){case"showDetailOrder":e.showDetailOrder(s.order);break;case"processOrderBiller":b(s);break}},y=async()=>{await e.getOrdersBillDelivery(),l({status:"success",message:"Ordenes actualizadas",time:3e3})};B(()=>e.orders,s=>{r.value=e.orders});const g=()=>{r.value.length===0&&(window.location.href="/admin/dashboard/")},b=async s=>{try{if(await _()){let o=await e.processOrderBiller(s);o.status==="success"&&(r.value.filter(D=>D.id!==o.data.id),l({status:"success",message:o.message}))}else l({status:"info",message:"Proceso cancelado"})}catch(a){a.response.data.application_code==401&&r.value.filter(o=>o.id!==a.response.data.data.id),l({status:"error",message:a.response.data.message})}},x=s=>{h.value=s.visibleDetails};return O(async()=>{await e.getOrdersBillDelivery(),r.value=e.orders}),(s,a)=>(c(),p(E,null,[i("div",P,[i("div",R,[i("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-2xl"},[w(" Despacho "),i("a",{style:{cursor:"pointer"},onClick:y},j)]),n(V,{type:t(m).RESPONSIBLE_BILLER,methodShipping:t(m).METHOD_SHIPPING_DELIVERY,orders:t(e).orders,onSearch:f},null,8,["type","methodShipping","orders"])]),n(T,{orders:r.value,actions:s.actions,onAction:v},null,8,["orders","actions"]),t(e).visibleDialog?(c(),k(L,{key:0,visible:t(e).visibleDialog,"onUpdate:visible":a[0]||(a[0]=o=>t(e).visibleDialog=o),orderDetails:t(e).order,onVisible:x},null,8,["visible","orderDetails"])):u("",!0),r.value.length===0?(c(),p("div",F,[H,n(t(N),{label:"Regresar",severity:"primary",outlined:"",onClick:g,class:"ml-3 !py-1.5"})])):u("",!0)]),n(t(S))],64))}};export{ee as default};
