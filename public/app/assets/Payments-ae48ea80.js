import{s as B,a as W}from"./tabpanel.esm-d5a31e21.js";import{T as I,C as Y,c as $,_ as U}from"./ConfirmMixin-069ed224.js";import{O as J,B as Q,o as l,c as v,h as r,E as D,y as X,e as b,v as O,k as y,w as h,t as P,u as s,i as k,a as c,s as V,F as N,l as T,p,m as Z,f as ee,q as L}from"./index-e48090bd.js";import{c as te,d as ae,s as _,a as x,e as E,b as ne}from"./tag.esm-530d0559.js";import{u as se}from"./OrdersApiService-d43d1747.js";import{_ as re}from"./FilterMultiSelect-b55c58ae.js";import"./index.esm-197290c2.js";import"./ApiService-1b1c4f2d.js";import"./index.esm-523a4420.js";import"./index-dd28ee9b.js";var oe={root:function(e){var a=e.instance,o=e.props;return["p-radiobutton p-component",{"p-radiobutton-checked":a.checked,"p-radiobutton-disabled":o.disabled,"p-radiobutton-focused":a.focused}]},input:function(e){var a=e.instance,o=e.props;return["p-radiobutton-box",{"p-highlight":a.checked,"p-disabled":o.disabled,"p-focus":a.focused}]},icon:"p-radiobutton-icon"},le={name:"BaseRadioButton",extends:Q,props:{value:null,modelValue:null,name:{type:String,default:null},disabled:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},css:{classes:oe},provide:function(){return{$parentInstance:this}}},R={name:"RadioButton",extends:le,emits:["click","update:modelValue","change","focus","blur"],data:function(){return{focused:!1}},methods:{onClick:function(e){this.disabled||(this.$emit("click",e),this.$emit("update:modelValue",this.value),this.$refs.input.focus(),this.checked||this.$emit("change",e))},onFocus:function(e){this.focused=!0,this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.$emit("blur",e)}},computed:{checked:function(){return this.modelValue!=null&&J.equals(this.modelValue,this.value)}}};function S(t){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(t)}function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),a.push.apply(a,o)}return a}function F(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?j(Object(a),!0).forEach(function(o){ie(t,o,a[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(a,o))})}return t}function ie(t,e,a){return e=de(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function de(t){var e=ue(t,"string");return S(e)==="symbol"?e:String(e)}function ue(t,e){if(S(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var o=a.call(t,e||"default");if(S(o)!=="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ce=["id","name","checked","disabled","value","aria-labelledby","aria-label"],pe=["data-p-highlight","data-p-disabled","data-p-focused"];function me(t,e,a,o,m,i){return l(),v("div",D({class:t.cx("root"),onClick:e[2]||(e[2]=function(g){return i.onClick(g)})},t.ptm("root"),{"data-pc-name":"radiobutton"}),[r("div",D({class:"p-hidden-accessible"},t.ptm("hiddenInputWrapper"),{"data-p-hidden-accessible":!0}),[r("input",D({ref:"input",id:t.inputId,type:"radio",name:t.name,checked:i.checked,disabled:t.disabled,value:t.value,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,onFocus:e[0]||(e[0]=function(){return i.onFocus&&i.onFocus.apply(i,arguments)}),onBlur:e[1]||(e[1]=function(){return i.onBlur&&i.onBlur.apply(i,arguments)})},t.ptm("hiddenInput")),null,16,ce)],16),r("div",D({ref:"box",class:[t.cx("input"),t.inputClass],style:t.inputStyle},F(F({},t.inputProps),t.ptm("input")),{"data-p-highlight":i.checked,"data-p-disabled":t.disabled,"data-p-focused":m.focused}),[r("div",D({class:t.cx("icon")},t.ptm("icon")),null,16)],16,pe)],16)}R.render=me;const A=se(),M=X("ordersPayment",{state:()=>({ordersPaymentsPending:[],order:[],showDialog:!1}),getters:{getOrdersPaymentsPending(t){return console.log(t.ordersPaymentsPending),t.ordersPaymentsPending}},actions:{async getOrdersPayment(){let t=await A.getOrdersPayment();this.ordersPaymentsPending=t.data},async assignResponsible(t){const e={orderId:t,responsible:"payment"};return await A.assignResponsible(e)}}}),ye=r("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"},[r("i",{class:"pi pi-info-circle rotate-180 !text-xl"}),k(" Medios de pago ")],-1),be={class:"mb-4 text-primary-900 font-inter font-medium text-md"},fe={class:"flex justify-between",style:{width:"80%"}},he={class:"mt-2 mb-1",style:{"max-width":"300px !important"}},ge={class:"text-primary-900 font-semi-bold"},ve={class:"mt-2 mb-1"},_e={class:"text-primary-900 font-semi-bold"},Pe={class:"mt-2 mb-1"},ke={class:"text-primary-900 font-semi-bold"},Ce={class:"mt-4 flex justify-between align-center"},we={class:"w-9/12"},De=r("p",{class:"mb-1"},"Selecciona el método de pago",-1),xe={key:0},Ne=r("p",{class:"py-5"},"Aquí puedes navegar a través de los métodos de pagos",-1),Se={class:"grid grid-cols-5"},Oe=["for"],Me={key:1,class:"py-8"},$e=r("p",{class:"text-primary-900 font-inter font-medium text-md"},"Datos de pago",-1),Ve={class:"grid grid-cols-2"},Ie=["for"],q={__name:"DialogMethosPayment",setup(t){const e=M(),a=b(),o=b([]),m=b(""),i=b(""),g=b([{idMethod:1,name:"BCI pagos",inputs:[{key:"bci1",type:"number",label:"N° de la tarjeta"},{key:"bci2",type:"date",label:"Válido hasta"},{key:"bci3",type:"text",label:"N° Dia (D, B, G, C)"},{key:"bci4",type:"number",label:"Cantidad de cuotas"},{key:"bci5",type:"number",label:"Cantidad de pagos"},{key:"bci6",type:"text",label:"Partir documento de tarjeta"},{key:"bci7",type:"number",label:"Primer pago parcial"},{key:"bci8",type:"number",label:"Cada pago adicional"}]},{idMethod:2,name:"Transferencia",inputs:[{key:"transferencia1",type:"date",label:"Fecha de transferencia"},{key:"transferencia2",type:"number",label:"N° de transferencia"},{key:"transferencia3",type:"number",label:"Importe total"}]},{idMethod:3,name:"Web pay",inputs:[{key:"webpay1",type:"number",label:"N° de la tarjeta"},{key:"webpay2",type:"date",label:"Válido hasta"},{key:"webpay3",type:"text",label:"N° Dia (D, B, G, C)"},{key:"webpay4",type:"number",label:"Cantidad de cuotas"},{key:"webpay5",type:"number",label:"Cantidad de pagos"},{key:"webpay6",type:"text",label:"Partir documento de tarjeta"},{key:"webpay7",type:"number",label:"Primer pago parcial"},{key:"webpay8",type:"number",label:"Cada pago adicional"}]},{idMethod:4,name:"Cheque",inputs:[{key:"cheque1",type:"number",label:"Importe"},{key:"cheque2",type:"date",label:"Fecha de vencimiento"},{key:"cheque3",type:"select",label:"Banco"},{key:"cheque4",type:"number",label:"N° de cheque"}]},{idMethod:5,name:"Efectivo",inputs:[{key:"efectivo1",type:"number",label:"Monto a pagar"}]},{idMethod:6,name:"Cuenta corriente",inputs:[{key:"cuentacorriente1",type:"number",label:"Código de cliente"},{key:"cuentacorriente2",type:"number",label:"Monto a pagar"}]},{idMethod:7,name:"Saldo a favor",inputs:[{key:"saldoafavor1",type:"date",label:"Fecha del pago"},{key:"saldoafavor2",type:"number",label:"Monto a pagar"}]}]),C=()=>{a.value&&!o.value.some(d=>d.name===a.value.name)&&(o.value.push(a.value),a.value=null)},f=d=>{i.value=g.value.find(n=>n.idMethod===d)};return O(()=>e.order,d=>{d&&(a.value=null,o.value=[],m.value="",i.value="")}),(d,n)=>(l(),y(s(Z),{modal:"",header:" ",style:{width:"70vw"}},{default:h(()=>[r("div",null,[ye,r("p",be," Factura N° "+P(s(e).order.DocNum),1)]),r("div",fe,[r("div",he,[r("p",null,[k("Cliente: "),r("span",ge,P(s(e).order.Customer.CardName),1)])]),r("div",ve,[r("p",null,[k("Monto total: "),r("span",_e,P(s(e).order.DocTotal),1)])]),r("div",Pe,[r("p",null,[k("Fecha: "),r("span",ke,P(s(e).order.DocDate),1)])])]),r("div",Ce,[r("div",we,[De,c(s(te),{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=u=>a.value=u),options:g.value,optionLabel:"name",placeholder:"Selecciona el método de pago",class:"w-full md:w-14rem"},null,8,["modelValue","options"])]),c(s(V),{icon:"pi pi-plus",label:"Agregar",class:"!py-2 !border-none !bg-primary-900",onClick:C})]),o.value.length>0?(l(),v("div",xe,[Ne,r("ul",Se,[(l(!0),v(N,null,T(o.value,u=>(l(),v("li",{class:"!bg-cyan-500 shadow-lg !mr-3 !p-3",key:u.name},[c(s(R),{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=w=>m.value=w),inputId:u.idMethod,onChange:w=>f(u.idMethod),name:"method",value:u.name},null,8,["modelValue","inputId","onChange","value"]),r("label",{for:u.idMethod,class:"ml-2"},P(u.name),9,Oe)]))),128))])])):p("",!0),i.value?(l(),v("div",Me,[$e,r("div",Ve,[(l(!0),v(N,null,T(i.value.inputs,({key:u,type:w,label:G},z)=>(l(),v("div",{key:z,class:"flex flex-col p-2"},[r("label",{for:u},P(G),9,Ie),c(s(ae),{type:w,name:u,modelValue:d.value,"onUpdate:modelValue":n[2]||(n[2]=K=>d.value=K),"aria-describedby":u},null,8,["type","name","modelValue","aria-describedby"])]))),128))])])):p("",!0),c(s(V),{label:"Pagar",onClick:n[3]||(n[3]=u=>s(e).showDialog=!1),class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}};const Be={key:0},Te={class:"flex"},Ee={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},je=r("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No se han encontrado ordenes ",-1),Fe=[je],H={__name:"DataTabletPayments",props:{orders:Array,filters:Array,column:Array},setup(t){const e=t,{showToast:a}=I.setup();Y.setup();const o=M(),m=b([]);ee(()=>{m.value=e.orders});const i=f=>{g(f),o.order=f,o.showDialog=!0},g=async f=>{try{const d=await o.assignResponsible(f.id);a({status:d.status,message:d.message})}catch(d){a({status:d.response.data.status,message:d.response.data.message})}},C=f=>{m.value=f.orders};return O(()=>e.orders,f=>{m.value=f}),(f,d)=>(l(),v(N,null,[m.value.length>0?(l(),v("div",Be,[r("div",Te,[c(re,{allOrders:e.orders,typeOrders:e.type,onFilter:C,filters:t.filters},null,8,["allOrders","typeOrders","filters"])]),c(s(ne),{value:m.value,rowsPerPageOptions:[5,10,20,50],rows:5,paginator:"",dataKey:"id",filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}"},{default:h(()=>[e.column.includes("DocEntry")?(l(),y(s(_),{key:0,sortable:"",headerClass:"!bg-primary-900",field:"DocEntry",header:"Factura"},{body:h(n=>[k(" N° "+P(n.data.DocEntry),1)]),_:1})):p("",!0),e.column.includes("DocNum")?(l(),y(s(_),{key:1,sortable:"",headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:h(n=>[k(" N° "+P(n.data.DocNum),1)]),_:1})):p("",!0),e.column.includes("Customer")?(l(),y(s(_),{key:2,sortable:"",headerClass:"!bg-primary-900",field:"Customer.CardName",header:"Cliente",style:{"max-width":"300px"}},{body:h(n=>[c(s(x),{icon:"pi pi-user",value:n.data.Customer.CardName,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1})):p("",!0),e.column.includes("NumAcount")?(l(),y(s(_),{key:3,sortable:"",headerClass:"!bg-primary-900",field:"NumAcount",header:"Cuenta"},{body:h(n=>[k(" N° "+P(n.data.DocNum),1)]),_:1})):p("",!0),e.column.includes("DocTotal")?(l(),y(s(_),{key:4,sortable:"",headerClass:"!bg-primary-900",field:"DocTotal",header:"Total"})):p("",!0),e.column.includes("SalesEmployeeName")?(l(),y(s(_),{key:5,sortable:"",headerClass:"!bg-primary-900",field:"SalesEmployeeName",header:"Vendedor"},{body:h(n=>[c(s(x),{icon:"pi pi-user",value:n.data.SalesEmployeeName,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1})):p("",!0),e.column.includes("MethodShippingName")?(l(),y(s(_),{key:6,sortable:"",headerClass:"!bg-primary-900",field:"MethodShippingName",header:"Entrega"},{body:h(n=>[n.data.method_shipping_id===s($).METHOD_SHIPPING_HERE_ID?(l(),y(s(x),{key:0,Tag:"",icon:"pi pi-shopping-cart",value:n.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):p("",!0),n.data.method_shipping_id===s($).METHOD_SHIPPING_PICKUP_ID?(l(),y(s(x),{key:1,Tag:"",icon:"pi pi-home",value:n.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):p("",!0),n.data.method_shipping_id===s($).METHOD_SHIPPING_DELIVERY_ID?(l(),y(s(x),{key:2,Tag:"",icon:"pi pi-truck",value:n.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):p("",!0)]),_:1})):p("",!0),e.column.includes("credit")?(l(),y(s(_),{key:7,sortable:"",headerClass:"!bg-primary-900",field:"credit",header:"Crédito"},{body:h(n=>[c(s(E),{modelValue:n.data.credit,"onUpdate:modelValue":u=>n.data.credit=u,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):p("",!0),e.column.includes("positiveBalance")?(l(),y(s(_),{key:8,sortable:"",headerClass:"!bg-primary-900",field:"positiveBalance",header:"Saldo a favor"},{body:h(n=>[c(s(E),{modelValue:n.data.positiveBalance,"onUpdate:modelValue":u=>n.data.positiveBalance=u,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):p("",!0),e.column.includes("actions")?(l(),y(s(_),{key:9,headerClass:"!bg-primary-900",field:"actions",header:""},{body:h(n=>[c(s(V),{label:"Pagar",class:"!py-1.5 !border-primary-900 !text-primary-900 float-right",onClick:u=>i(n.data),outlined:""},null,8,["onClick"])]),_:1})):p("",!0)]),_:1},8,["value"])])):p("",!0),m.value.length===0?(l(),v("div",Ee,Fe)):p("",!0)],64))}},Ae={class:"flex justify-between"},Ue=r("i",{class:"pi pi-refresh"},null,-1),Le=[Ue],Re={__name:"ToManage",props:{orders:Array},setup(t){const{showToast:e}=I.setup(),a=M(),o=b(["DocEntry","DocNum","Customer"]),m=b(["DocEntry","DocNum","Customer","DocTotal","SalesEmployeeName","MethodShippingName","credit","positiveBalance","actions"]);b(!1);const i=b([]),g=b(!1);L(async()=>{await a.getOrdersPayment(),i.value=a.ordersPaymentsPending,g.value=!0});const C=d=>{i.value=d.orders},f=async()=>{await a.getOrdersPayment(),e({status:"success",title:"Ordenes actualizadas",message:"Las ordenes se han actualizado correctamente"})};return O(()=>a.ordersPaymentsPending,d=>{i.value=d}),(d,n)=>(l(),v(N,null,[r("div",Ae,[r("div",null,[r("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"},[k(" Facturas pendientes de pago "),r("a",{style:{cursor:"pointer"},onClick:f},Le)])]),c(U,{orders:s(a).ordersPaymentsPending,onSearch:C},null,8,["orders"])]),g.value?(l(),y(H,{key:0,orders:i.value,filters:o.value,column:m.value,onAction:d.action},null,8,["orders","filters","column","onAction"])):p("",!0),c(q,{visible:s(a).showDialog,"onUpdate:visible":n[0]||(n[0]=u=>s(a).showDialog=u)},null,8,["visible"])],64))}},qe={class:"flex justify-between"},He=r("i",{class:"pi pi-refresh"},null,-1),Ge=[He],ze={__name:"Managed",props:{orders:Array},setup(t){const{showToast:e}=I.setup(),a=M(),o=b(["Customer","NumAcount"]),m=b(["Customer","NumAcount","actions"]),i=b(!1),g=b([]),C=b(!1);L(async()=>{await a.getOrdersPayment(),g.value=a.ordersPaymentsPending,C.value=!0});const f=n=>{g.value=n.orders},d=async()=>{await a.getOrdersPayment(),e({status:"success",title:"Ordenes actualizadas",message:"Las ordenes se han actualizado correctamente"})};return O(()=>a.ordersPaymentsPending,n=>{g.value=n}),(n,u)=>(l(),v(N,null,[r("div",qe,[r("div",null,[r("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"},[k(" Pago a cuenta "),r("a",{style:{cursor:"pointer"},onClick:d},Ge)])]),c(U,{orders:s(a).ordersPaymentsPending,onSearch:f},null,8,["orders"])]),C.value?(l(),y(H,{key:0,orders:[],filters:o.value,column:m.value,onAction:n.action},null,8,["filters","column","onAction"])):p("",!0),c(q,{visible:i.value,"onUpdate:visible":u[0]||(u[0]=w=>i.value=w)},null,8,["visible"])],64))}};const Ke={class:"px-3"},st={__name:"Payments",setup(t){return(e,a)=>(l(),v("div",Ke,[c(s(W),null,{default:h(()=>[c(s(B),{header:"Facturas pendientes de pago"},{default:h(()=>[c(Re)]),_:1}),c(s(B),{header:"Pago a cuenta"},{default:h(()=>[c(ze)]),_:1})]),_:1})]))}};export{st as default};
