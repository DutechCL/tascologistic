import{s as K,a as ee}from"./tabpanel.esm-313b4ebb.js";import{b as c,h as R,o as m,i as f,w as n,f as l,g as V,t as M,a,u as e,s as b,j as J,c as U,F as q,k as ae,l as le,m as te,p as oe,r as se,q as S,v as re}from"./index-cf677c25.js";import{a as D,b as E,s as r,c as Q}from"./tag.esm-cabe3577.js";import{_ as W,s as y}from"./multiselect.esm-a655179a.js";import{u as X}from"./OrdersApiService-52cd735e.js";import{s as I}from"./treeselect.esm-b1f6ae4a.js";import"./index.esm-1835c2e5.js";const ie=l("h1",{class:"mb-1 text-primary-900 font-inter font-semibold text-xl"},[l("i",{class:"pi pi-eye !text-xl"}),V(" Ver Documentos ")],-1),de={class:"flex align-center mb-2"},ne={class:"text-primary-900"},ue=l("strong",{class:"mr-3 font-semibold"},"Nota de venta N°",-1),ce=l("div",{class:"mt-5"},[l("p",null," 2 archivos adjuntos "),l("div",{class:"flex"},[l("div",{class:"mt-2 mr-5",width:"200",height:"180"},[l("embed",{class:"w-full",src:"http://ocw.uv.es/ingenieria-y-arquitectura/programacionmultimedia/t2-1-css.pdf",type:"application/pdf"}),l("div",{class:"bg-gray-100"},[l("i",{class:"pi pi-file-pdf m-2",style:{color:"#F40F02"}}),l("a",{href:"#",class:"font-normal text-sm"},"Nombre de pdf")])]),l("div",{class:"mt-2 mr-5",width:"200",height:"180"},[l("embed",{class:"w-full",src:"http://ocw.uv.es/ingenieria-y-arquitectura/programacionmultimedia/t2-1-css.pdf",type:"application/pdf"}),l("div",{class:"bg-gray-100"},[l("i",{class:"pi pi-file-pdf m-2",style:{color:"#F40F02"}}),l("a",{href:"#",class:"font-normal text-sm"},"Nombre de pdf")])])])],-1),me={__name:"DialogDetail",props:{order:String},setup(_){const v=_,p=c([]);return R(()=>{p.value=v.order}),(g,s)=>(m(),f(e(J),{modal:"",header:" ",style:{width:"70vw"}},{default:n(()=>[l("div",null,[ie,l("div",de,[l("p",ne,[ue,V(M(p.value.DocNum),1)]),a(e(D),{icon:"pi pi-shopping-bag",value:p.value.MethodShippingName,class:"ml-3 tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),a(e(D),{icon:"pi pi-user",value:p.value.Customer.CardName,class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"]),ce]),a(e(b),{label:"Cerrar",onClick:s[0]||(s[0]=u=>g.visible=!1),class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}},pe=l("h1",{class:"mb-1 text-primary-900 font-inter font-semibold text-xl"},[l("i",{class:"pi pi-eye !text-xl"}),V(" Ver observaciones ")],-1),fe={class:"flex align-center mb-2"},ve={class:"text-primary-900"},he=l("strong",{class:"mr-3 font-semibold"},"Nota de venta N°",-1),ye={class:"mt-5"},be=l("strong",null,"NOTA:",-1),ge=["innerHTML"],_e={__name:"DialogDetailObservation",props:{order:String},setup(_){const v=_,p=c([]);R(()=>{p.value=v.order});const g=s=>s.replace(/\r/g,"<br>").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");return(s,u)=>(m(),f(e(J),{modal:"",header:" ",style:{width:"70vw"}},{default:n(()=>[l("div",null,[pe,l("div",fe,[l("p",ve,[he,V(M(p.value.DocNum),1)]),a(e(D),{icon:"pi pi-shopping-cart",value:p.value.MethodShippingName,class:"ml-3 tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),a(e(D),{icon:"pi pi-user",value:p.value.Customer.CardName,class:"tag-radius tag-rounded-blue tag-font-method mb-5"},null,8,["value"]),a(e(E),{tableStyle:"min-width: 50rem",filters:"filters",value:p.value.OrderItems},{default:n(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"Quantity",header:"Cantidad"},{body:n(d=>[l("p",null,M(d.data.Quantity)+" Unidad",1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"ItemCode",header:"SKU"}),a(e(r),{headerClass:"!bg-primary-900",field:"ItemDescription",header:"Producto"}),a(e(r),{headerClass:"!bg-primary-900",field:"Problems",header:"Problema"},{body:n(d=>[(m(!0),U(q,null,ae(d.data.Problems,(h,C)=>(m(),f(e(D),{key:C,value:h.ProblemName,rounded:"",class:"mr-3 tag-radius tag-rounded-blue tag-font-method"},null,8,["value"]))),128))]),_:1})]),_:1},8,["value"]),l("div",ye,[be,V(),l("span",{innerHTML:g(p.value.Comments)},null,8,ge)])]),a(e(b),{label:"Cerrar",onClick:u[0]||(u[0]=d=>s.visibleObservation=!1),class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}};const xe={class:"flex justify-between"},De=l("div",null,[l("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"}," Notas de venta ")],-1),Ve={key:0},Ce=l("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Aquí ",-1),we={class:"flex"},Ne={class:"card flex justify-content-center"},$e={class:"card flex justify-content-center"},ke={class:"card flex justify-content-center"},Se={class:"card flex justify-content-center mr-5"},Me={class:"card flex justify-content-center"},Te=l("div",null,[l("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Retiro / Despacho ")],-1),Le={class:"flex"},Oe={class:"card flex justify-content-center"},Ie={class:"card flex justify-content-center"},Ue={class:"card flex justify-content-center"},Pe={class:"card flex justify-content-center mr-5"},je={class:"card flex justify-content-center"},k=1,He={__name:"ToManage",props:{ListOrders:Array},setup(_){const v=_,p=le(),g=te(),s=X(),u=c(!1),d=c(!1),h=c({}),C=c(!1),T=c([]),P=c([]),j=c([]),H=c([]),A=c([]),w=c(v.ListOrders.filter(i=>i.MethodShippingId===k)),N=c(v.ListOrders.filter(i=>i.MethodShippingId!==k)),L=c(w.value),O=c(N.value);oe(T,i=>{i.length===0?(N.value=v.ListOrders.filter(o=>o.MethodShippingId!==k),w.value=v.ListOrders.filter(o=>o.MethodShippingId===k)):(N.value=i.filter(o=>o.MethodShippingId!==k),w.value=i.filter(o=>o.MethodShippingId===k))});const B=i=>{h.value={...i},d.value=!0,C.value=!0},Y=i=>{u.value=!0,h.value={...i},C.value=!0},G=i=>{i||(h.value={},C.value=!1)},F=c(!1),z=async i=>{F.value=!0;try{const{first:o,rows:$}=i,t=await s.getOrders({offset:o,limit:$});w.value=[...w.value,...t]}catch(o){console.error("Error al cargar más datos",o)}finally{F.value=!1}},Z=async i=>{p.require({message:"¿Estas seguro que deseas continuar?",header:"Confirmación",icon:"pi pi-exclamation-triangle",accept:async()=>{let o=await s.postActionOrder(i.id,1);if(g.add({severity:o.status,summary:"",detail:o.message,life:3e3}),o.status==="success"){const $=N.value.findIndex(t=>t===i);$!==-1&&N.value.splice($,1)}},reject:()=>{}})};return(i,o)=>{const $=se("Toast");return m(),U(q,null,[l("div",xe,[De,a(W)]),w.value.length>0?(m(),U("div",Ve,[Ce,l("div",we,[l("div",Ne,[(m(),f(e(y),{modelValue:T.value,"onUpdate:modelValue":o[0]||(o[0]=t=>T.value=t),options:L.value,filter:"",optionLabel:"DocNum",placeholder:"Nota de venta",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:i.DocNum},null,8,["modelValue","options"]))]),l("div",$e,[(m(),f(e(y),{modelValue:P.value,"onUpdate:modelValue":o[1]||(o[1]=t=>P.value=t),options:L.value,filter:"",optionLabel:"DocDate",placeholder:"Fecha",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:i.DocDate},null,8,["modelValue","options"]))]),l("div",ke,[(m(),f(e(y),{modelValue:j.value,"onUpdate:modelValue":o[2]||(o[2]=t=>j.value=t),options:L.value,filter:"",optionLabel:"DocTime",placeholder:"Hora",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:i.DocTime},null,8,["modelValue","options"]))]),l("div",Se,[a(e(y),{modelValue:H.value,"onUpdate:modelValue":o[3]||(o[3]=t=>H.value=t),options:L.value,filter:"",optionLabel:"Customer.CardName",placeholder:"Clientes",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"}},null,8,["modelValue","options"])]),l("div",Me,[(m(),f(e(y),{modelValue:A.value,"onUpdate:modelValue":o[4]||(o[4]=t=>A.value=t),options:L.value,filter:"",optionLabel:"DocTotal",placeholder:"Total",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:i.DocTotal},null,8,["modelValue","options"]))])]),a(e(E),{onOnPage:z,class:"mb-20",value:w.value,tableStyle:"min-width: 50rem",filters:"filters",paginator:"",rows:5,dataKey:"id",filterDisplay:"row",loading:F.value},{default:n(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:n(t=>[V(" N° "+M(t.data.DocNum),1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"DocDate",header:"Fecha"}),a(e(r),{headerClass:"!bg-primary-900",field:"DocTime",header:"Hora"}),a(e(r),{headerClass:"!bg-primary-900",field:"Customer.CardName",header:"Cliente"}),a(e(r),{headerClass:"!bg-primary-900",field:"DocTotal",header:"Monto total"},{body:n(t=>[a(e(Q),{modelValue:t.data.DocTotal,"onUpdate:modelValue":x=>t.data.DocTotal=x,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"MethodShippingName",header:"Método entrega"},{body:n(t=>[a(e(D),{Tag:"",icon:"pi pi-shopping-cart",value:t.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:" Observación"},{body:n(t=>[a(e(b),{icon:"pi pi-eye",onClick:x=>B(t.data),class:"!font-normal !text-primary-900",label:"Ver observación",link:""},null,8,["onClick"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:""},{body:n(t=>[a(e(b),{label:"Informado",class:"!py-1.5 !border-primary-900 !text-primary-900",outlined:""})]),_:1})]),_:1},8,["value","loading"])])):S("",!0),Te,l("div",Le,[l("div",Oe,[(m(),f(e(y),{modelValue:T.value,"onUpdate:modelValue":o[5]||(o[5]=t=>T.value=t),options:O.value,filter:"",optionLabel:"DocNum",placeholder:"Nota de venta",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:i.DocNum},null,8,["modelValue","options"]))]),l("div",Ie,[(m(),f(e(y),{modelValue:P.value,"onUpdate:modelValue":o[6]||(o[6]=t=>P.value=t),options:O.value,filter:"",optionLabel:"DocDate",placeholder:"Fecha",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:i.DocDate},null,8,["modelValue","options"]))]),l("div",Ue,[(m(),f(e(y),{modelValue:j.value,"onUpdate:modelValue":o[7]||(o[7]=t=>j.value=t),options:O.value,filter:"",optionLabel:"DocTime",placeholder:"Hora",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:i.DocTime},null,8,["modelValue","options"]))]),l("div",Pe,[a(e(y),{modelValue:H.value,"onUpdate:modelValue":o[8]||(o[8]=t=>H.value=t),options:O.value,filter:"",optionLabel:"Customer.CardName",placeholder:"Clientes",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"}},null,8,["modelValue","options"])]),l("div",je,[(m(),f(e(y),{modelValue:A.value,"onUpdate:modelValue":o[9]||(o[9]=t=>A.value=t),options:O.value,filter:"",optionLabel:"DocTotal",placeholder:"Total",display:"chip",maxSelectedLabels:3,class:"w-full md:w-20rem",style:{border:"none","max-width":"300px"},key:i.DocTotal},null,8,["modelValue","options"]))])]),a(e(E),{onOnPage:z,value:N.value,tableStyle:"min-width: 50rem",filters:"filters",paginator:"",rows:5,dataKey:"id",filterDisplay:"row",loading:F.value},{default:n(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:n(t=>[V(" N° "+M(t.data.DocNum),1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"DocDate",header:"Fecha"}),a(e(r),{headerClass:"!bg-primary-900",field:"DocTime",header:"Hora"}),a(e(r),{headerClass:"!bg-primary-900",field:"Customer.CardName",header:"Cliente"}),a(e(r),{headerClass:"!bg-primary-900",field:"DocTotal",header:"Monto total"},{body:n(t=>[a(e(Q),{modelValue:t.data.DocTotal,"onUpdate:modelValue":x=>t.data.DocTotal=x,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"MethodShippingName",header:"Método entrega"},{body:n(t=>[a(e(D),{Tag:"",icon:"pi pi-shopping-cart",value:t.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:"Documentos"},{body:n(t=>[a(e(b),{icon:"pi pi-eye",onClick:x=>Y(t.data),class:"!font-normal !text-primary-900",label:"Ver documentos",link:""},null,8,["onClick"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:" Observación"},{body:n(t=>[t.data.OrderStatusId==4?(m(),f(e(b),{key:0,icon:"pi pi-eye",onClick:x=>B(t.data),class:"!font-normal !text-primary-900",label:"Ver observación",link:""},null,8,["onClick"])):S("",!0)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:""},{body:n(t=>[a(e(b),{label:"Rechazar",onClick:o[10]||(o[10]=x=>i.visibleReport=!0),class:"!py-1.5 mr-3 !border-primary-900 !text-primary-900",outlined:""}),a(e(b),{label:"Autorizar",onClick:x=>Z(t.data),class:"!py-1.5 !border-primary-900 !text-primary-900",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","loading"]),C.value?(m(),f(me,{visible:u.value,"onUpdate:visible":[o[11]||(o[11]=t=>u.value=t),G],order:h.value,key:h.value.timestamp},null,8,["visible","order"])):S("",!0),C.value?(m(),f(_e,{visible:d.value,"onUpdate:visible":[o[12]||(o[12]=t=>d.value=t),G],order:h.value,key:h.value.timestamp},null,8,["visible","order"])):S("",!0),a($),a(e(re))],64)}}},Ae={class:"flex justify-between"},Fe=l("div",null,[l("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"}," Notas de venta "),l("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Aquí ")],-1),Ee={class:"flex"},Re={class:"card flex justify-content-center"},qe={class:"card flex justify-content-center"},Be={class:"card flex justify-content-center"},Ge={class:"card flex justify-content-center mr-20"},ze={class:"card flex justify-content-center"},Ke={__name:"Managed",props:{ordersManagerPickupAndDelivery:Array},setup(_){const p=c(_.ordersManagerPickupAndDelivery.filter(s=>s.MethodShippingId!==METHOD_SHIPPING_HERE));console.log(p);const g=c([{statusId:1,note:"4567892",date:"19/04/2023",hour:"10:26",client:"Daniel Ramirez Palma",status:"En espera",totalAmount:"$200",btnInfo:"Informado"},{statusId:2,note:"0998764",date:"19/04/2023",hour:"10:58",client:"Lucas Sandoval",status:"En preparación",totalAmount:"$300"}]);return(s,u)=>(m(),U(q,null,[l("div",Ae,[Fe,a(W)]),l("div",Ee,[l("div",Re,[a(e(I),{modelValue:s.selectedValue,"onUpdate:modelValue":u[0]||(u[0]=d=>s.selectedValue=d),options:s.nodes,selectionMode:"checkbox",placeholder:"Nota de venta",class:"md:w-20rem w-full"},null,8,["modelValue","options"])]),l("div",qe,[a(e(I),{modelValue:s.selectedValue,"onUpdate:modelValue":u[1]||(u[1]=d=>s.selectedValue=d),options:s.nodes,selectionMode:"checkbox",placeholder:"Fecha",class:"md:w-20rem w-full"},null,8,["modelValue","options"])]),l("div",Be,[a(e(I),{modelValue:s.selectedValue,"onUpdate:modelValue":u[2]||(u[2]=d=>s.selectedValue=d),options:s.nodes,selectionMode:"checkbox",placeholder:"Hora",class:"md:w-20rem w-full"},null,8,["modelValue","options"])]),l("div",Ge,[a(e(I),{modelValue:s.selectedValue,"onUpdate:modelValue":u[3]||(u[3]=d=>s.selectedValue=d),options:s.nodes,selectionMode:"checkbox",placeholder:"Cliente",class:"md:w-20rem w-full"},null,8,["modelValue","options"])]),l("div",ze,[a(e(I),{modelValue:s.selectedValue,"onUpdate:modelValue":u[4]||(u[4]=d=>s.selectedValue=d),options:s.nodes,selectionMode:"checkbox",placeholder:"Total",class:"md:w-20rem w-full"},null,8,["modelValue","options"])])]),a(e(E),{class:"mb-20",value:g.value,tableStyle:"min-width: 50rem"},{default:n(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"note",header:"Nota de venta"},{body:n(d=>[V(" N° "+M(d.data.note),1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"date",header:"Fecha"}),a(e(r),{headerClass:"!bg-primary-900",field:"hour",header:"Hora"}),a(e(r),{headerClass:"!bg-primary-900",field:"client",header:"Cliente"}),a(e(r),{headerClass:"!bg-primary-900",field:"totalAmount",header:"Monto total"}),a(e(r),{headerClass:"!bg-primary-900",field:"totalAmount",header:"Método entrega"},{body:n(d=>[a(e(D),{Tag:"",icon:"pi pi-shopping-cart",value:"Aquí",rounded:"",class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"})]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:" Observación"},{body:n(d=>[a(e(b),{icon:"pi pi-eye",class:"!font-normal !text-primary-900",label:"Ver observación",link:""})]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:""},{body:n(d=>[a(e(b),{label:"Informado",class:"!py-1.5 !border-primary-900 !text-primary-900",outlined:""})]),_:1})]),_:1},8,["value"])],64))}};const Qe={class:"px-3"},Je=1,ta={__name:"SalesNotes",setup(_){const v=X(),p=c([]),g=c([]),s=c([]),u=c(!1);return R(async()=>{p.value=await v.getOrders(),g.value=await v.getProcessedOrders(),s.value=p.value.filter(d=>d.MethodShippingId!==Je),u.value=!0}),(d,h)=>(m(),U("div",Qe,[a(e(ee),null,{default:n(()=>[a(e(K),{header:"Por gestionar"},{default:n(()=>[u.value?(m(),f(He,{key:0,ListOrders:p.value},null,8,["ListOrders"])):S("",!0)]),_:1}),a(e(K),{header:"Gestionadas"},{default:n(()=>[u.value?(m(),f(Ke,{key:0,ListOrders:s.value},null,8,["ListOrders"])):S("",!0)]),_:1})]),_:1})]))}};export{ta as default};
