import{s as E,a as Y}from"./tabpanel.esm-c86c63f5.js";import{u as S,T as V,C as A,c as O,_ as L}from"./ConfirmMixin-09fdbf34.js";import{O as J,B as Q,o as l,c as g,h as o,E as D,e as b,v as T,k as f,w as y,t as C,u as r,i as P,a as d,s as M,F as w,l as B,p,m as X,f as R,q as U}from"./index-1730fa93.js";import{c as Z,d as ee,s as k,a as x,e as I,b as q}from"./tag.esm-1e519b5f.js";import{_ as te}from"./FilterMultiSelect-7d98fb57.js";import"./index.esm-cb9c53e2.js";import"./OrdersApiService-bd4fdae8.js";import"./ApiService-c2258a17.js";import"./_commonjsHelpers-725317a4.js";import"./index.esm-0fb109ef.js";import"./index-dd28ee9b.js";var ae={root:function(e){var a=e.instance,n=e.props;return["p-radiobutton p-component",{"p-radiobutton-checked":a.checked,"p-radiobutton-disabled":n.disabled,"p-radiobutton-focused":a.focused}]},input:function(e){var a=e.instance,n=e.props;return["p-radiobutton-box",{"p-highlight":a.checked,"p-disabled":n.disabled,"p-focus":a.focused}]},icon:"p-radiobutton-icon"},re={name:"BaseRadioButton",extends:Q,props:{value:null,modelValue:null,name:{type:String,default:null},disabled:{type:Boolean,default:!1},inputId:{type:String,default:null},inputClass:{type:[String,Object],default:null},inputStyle:{type:Object,default:null},inputProps:{type:null,default:null},"aria-labelledby":{type:String,default:null},"aria-label":{type:String,default:null}},css:{classes:ae},provide:function(){return{$parentInstance:this}}},H={name:"RadioButton",extends:re,emits:["click","update:modelValue","change","focus","blur"],data:function(){return{focused:!1}},methods:{onClick:function(e){this.disabled||(this.$emit("click",e),this.$emit("update:modelValue",this.value),this.$refs.input.focus(),this.checked||this.$emit("change",e))},onFocus:function(e){this.focused=!0,this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.$emit("blur",e)}},computed:{checked:function(){return this.modelValue!=null&&J.equals(this.modelValue,this.value)}}};function N(t){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(t)}function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),a.push.apply(a,n)}return a}function F(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?j(Object(a),!0).forEach(function(n){se(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function se(t,e,a){return e=oe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function oe(t){var e=ne(t,"string");return N(e)==="symbol"?e:String(e)}function ne(t,e){if(N(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e||"default");if(N(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var le=["id","name","checked","disabled","value","aria-labelledby","aria-label"],ie=["data-p-highlight","data-p-disabled","data-p-focused"];function de(t,e,a,n,m,i){return l(),g("div",D({class:t.cx("root"),onClick:e[2]||(e[2]=function(_){return i.onClick(_)})},t.ptm("root"),{"data-pc-name":"radiobutton"}),[o("div",D({class:"p-hidden-accessible"},t.ptm("hiddenInputWrapper"),{"data-p-hidden-accessible":!0}),[o("input",D({ref:"input",id:t.inputId,type:"radio",name:t.name,checked:i.checked,disabled:t.disabled,value:t.value,"aria-labelledby":t.ariaLabelledby,"aria-label":t.ariaLabel,onFocus:e[0]||(e[0]=function(){return i.onFocus&&i.onFocus.apply(i,arguments)}),onBlur:e[1]||(e[1]=function(){return i.onBlur&&i.onBlur.apply(i,arguments)})},t.ptm("hiddenInput")),null,16,le)],16),o("div",D({ref:"box",class:[t.cx("input"),t.inputClass],style:t.inputStyle},F(F({},t.inputProps),t.ptm("input")),{"data-p-highlight":i.checked,"data-p-disabled":t.disabled,"data-p-focused":m.focused}),[o("div",D({class:t.cx("icon")},t.ptm("icon")),null,16)],16,ie)],16)}H.render=de;const ue=o("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"},[o("i",{class:"pi pi-info-circle rotate-180 !text-xl"}),P(" Medios de pago ")],-1),ce={class:"mb-4 text-primary-900 font-inter font-medium text-md"},pe={class:"flex justify-between",style:{width:"80%"}},me={class:"mt-2 mb-1",style:{"max-width":"300px !important"}},ye={class:"text-primary-900 font-semi-bold"},be={class:"mt-2 mb-1"},fe={class:"text-primary-900 font-semi-bold"},he={class:"mt-2 mb-1"},ge={class:"text-primary-900 font-semi-bold"},ve={class:"mt-4 flex justify-between align-center"},_e={class:"w-9/12"},ke=o("p",{class:"mb-1"},"Selecciona el método de pago",-1),Ce={key:0},Pe=o("p",{class:"py-5"},"Aquí puedes navegar a través de los métodos de pagos",-1),xe={class:"grid grid-cols-5"},we=["for"],De={key:1,class:"py-8"},Ne=o("p",{class:"text-primary-900 font-inter font-medium text-md"},"Datos de pago",-1),Se={class:"grid grid-cols-2"},$e=["for"],G={__name:"DialogMethosPayment",setup(t){const e=S(),a=b(),n=b([]),m=b(""),i=b(""),_=b([{idMethod:1,name:"BCI pagos",inputs:[{key:"bci1",type:"number",label:"N° de la tarjeta"},{key:"bci2",type:"date",label:"Válido hasta"},{key:"bci3",type:"text",label:"N° Dia (D, B, G, C)"},{key:"bci4",type:"number",label:"Cantidad de cuotas"},{key:"bci5",type:"number",label:"Cantidad de pagos"},{key:"bci6",type:"text",label:"Partir documento de tarjeta"},{key:"bci7",type:"number",label:"Primer pago parcial"},{key:"bci8",type:"number",label:"Cada pago adicional"}]},{idMethod:2,name:"Transferencia",inputs:[{key:"transferencia1",type:"date",label:"Fecha de transferencia"},{key:"transferencia2",type:"number",label:"N° de transferencia"},{key:"transferencia3",type:"number",label:"Importe total"}]},{idMethod:3,name:"Web pay",inputs:[{key:"webpay1",type:"number",label:"N° de la tarjeta"},{key:"webpay2",type:"date",label:"Válido hasta"},{key:"webpay3",type:"text",label:"N° Dia (D, B, G, C)"},{key:"webpay4",type:"number",label:"Cantidad de cuotas"},{key:"webpay5",type:"number",label:"Cantidad de pagos"},{key:"webpay6",type:"text",label:"Partir documento de tarjeta"},{key:"webpay7",type:"number",label:"Primer pago parcial"},{key:"webpay8",type:"number",label:"Cada pago adicional"}]},{idMethod:4,name:"Cheque",inputs:[{key:"cheque1",type:"number",label:"Importe"},{key:"cheque2",type:"date",label:"Fecha de vencimiento"},{key:"cheque3",type:"select",label:"Banco"},{key:"cheque4",type:"number",label:"N° de cheque"}]},{idMethod:5,name:"Efectivo",inputs:[{key:"efectivo1",type:"number",label:"Monto a pagar"}]},{idMethod:6,name:"Cuenta corriente",inputs:[{key:"cuentacorriente1",type:"number",label:"Código de cliente"},{key:"cuentacorriente2",type:"number",label:"Monto a pagar"}]},{idMethod:7,name:"Saldo a favor",inputs:[{key:"saldoafavor1",type:"date",label:"Fecha del pago"},{key:"saldoafavor2",type:"number",label:"Monto a pagar"}]}]),v=()=>{a.value&&!n.value.some(u=>u.name===a.value.name)&&(n.value.push(a.value),a.value=null)},h=u=>{i.value=_.value.find(s=>s.idMethod===u)};return T(()=>e.order,u=>{u&&(a.value=null,n.value=[],m.value="",i.value="")}),(u,s)=>(l(),f(r(X),{modal:"",header:" ",style:{width:"70vw"}},{default:y(()=>[o("div",null,[ue,o("p",ce," Factura N° "+C(r(e).order.DocNum),1)]),o("div",pe,[o("div",me,[o("p",null,[P("Cliente: "),o("span",ye,C(r(e).order.Customer.CardName),1)])]),o("div",be,[o("p",null,[P("Monto total: "),o("span",fe,C(r(e).order.DocTotal),1)])]),o("div",he,[o("p",null,[P("Fecha: "),o("span",ge,C(r(e).order.DocDate),1)])])]),o("div",ve,[o("div",_e,[ke,d(r(Z),{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=c=>a.value=c),options:_.value,optionLabel:"name",placeholder:"Selecciona el método de pago",class:"w-full md:w-14rem"},null,8,["modelValue","options"])]),d(r(M),{icon:"pi pi-plus",label:"Agregar",class:"!py-2 !border-none !bg-primary-900",onClick:v})]),n.value.length>0?(l(),g("div",Ce,[Pe,o("ul",xe,[(l(!0),g(w,null,B(n.value,c=>(l(),g("li",{class:"!bg-cyan-500 shadow-lg !mr-3 !p-3",key:c.name},[d(r(H),{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=$=>m.value=$),inputId:c.idMethod,onChange:$=>h(c.idMethod),name:"method",value:c.name},null,8,["modelValue","inputId","onChange","value"]),o("label",{for:c.idMethod,class:"ml-2"},C(c.name),9,we)]))),128))])])):p("",!0),i.value?(l(),g("div",De,[Ne,o("div",Se,[(l(!0),g(w,null,B(i.value.inputs,({key:c,type:$,label:K},z)=>(l(),g("div",{key:z,class:"flex flex-col p-2"},[o("label",{for:c},C(K),9,$e),d(r(ee),{type:$,name:c,modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=W=>u.value=W),"aria-describedby":c},null,8,["type","name","modelValue","aria-describedby"])]))),128))])])):p("",!0),d(r(M),{label:"Pagar",onClick:s[3]||(s[3]=c=>r(e).showDialog=!1),class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}};const Oe={key:0},Me={class:"flex"},Ve={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Te=o("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No se han encontrado ordenes ",-1),Ee=[Te],Be={__name:"DataTabletPayments",props:{orders:Array,filters:Array,column:Array},setup(t){const e=t,{showToast:a}=V.setup();A.setup();const n=S(),m=b([]);R(()=>{m.value=e.orders});const i=h=>{_(h),n.order=h,n.showDialog=!0},_=async h=>{try{const u=await n.assignResponsible(h.id);a({status:u.status,message:u.message})}catch(u){a({status:u.response.data.status,message:u.response.data.message})}},v=h=>{m.value=h.orders};return T(()=>e.orders,h=>{m.value=h}),(h,u)=>(l(),g(w,null,[m.value.length>0?(l(),g("div",Oe,[o("div",Me,[d(te,{allOrders:e.orders,typeOrders:e.type,onFilter:v,filters:t.filters},null,8,["allOrders","typeOrders","filters"])]),d(r(q),{value:m.value,rowsPerPageOptions:[5,10,20,50],rows:5,paginator:"",dataKey:"id",filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}"},{default:y(()=>[e.column.includes("DocEntry")?(l(),f(r(k),{key:0,sortable:"",headerClass:"!bg-primary-900",field:"DocEntry",header:"Factura"},{body:y(s=>[P(" N° "+C(s.data.DocEntry),1)]),_:1})):p("",!0),e.column.includes("DocNum")?(l(),f(r(k),{key:1,sortable:"",headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:y(s=>[P(" N° "+C(s.data.DocNum),1)]),_:1})):p("",!0),e.column.includes("Customer")?(l(),f(r(k),{key:2,sortable:"",headerClass:"!bg-primary-900",field:"Customer.CardName",header:"Cliente",style:{"max-width":"300px"}},{body:y(s=>[d(r(x),{icon:"pi pi-user",value:s.data.Customer.CardName,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1})):p("",!0),e.column.includes("NumAcount")?(l(),f(r(k),{key:3,sortable:"",headerClass:"!bg-primary-900",field:"NumAcount",header:"Cuenta"},{body:y(s=>[P(" N° "+C(s.data.DocNum),1)]),_:1})):p("",!0),e.column.includes("DocTotal")?(l(),f(r(k),{key:4,sortable:"",headerClass:"!bg-primary-900",field:"DocTotal",header:"Total"})):p("",!0),e.column.includes("SalesEmployeeName")?(l(),f(r(k),{key:5,sortable:"",headerClass:"!bg-primary-900",field:"SalesEmployeeName",header:"Vendedor"},{body:y(s=>[d(r(x),{icon:"pi pi-user",value:s.data.SalesEmployeeName,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1})):p("",!0),e.column.includes("MethodShippingName")?(l(),f(r(k),{key:6,sortable:"",headerClass:"!bg-primary-900",field:"MethodShippingName",header:"Entrega"},{body:y(s=>[s.data.method_shipping_id===r(O).METHOD_SHIPPING_HERE_ID?(l(),f(r(x),{key:0,Tag:"",icon:"pi pi-shopping-cart",value:s.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):p("",!0),s.data.method_shipping_id===r(O).METHOD_SHIPPING_PICKUP_ID?(l(),f(r(x),{key:1,Tag:"",icon:"pi pi-home",value:s.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):p("",!0),s.data.method_shipping_id===r(O).METHOD_SHIPPING_DELIVERY_ID?(l(),f(r(x),{key:2,Tag:"",icon:"pi pi-truck",value:s.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])):p("",!0)]),_:1})):p("",!0),e.column.includes("credit")?(l(),f(r(k),{key:7,sortable:"",headerClass:"!bg-primary-900",field:"credit",header:"Crédito"},{body:y(s=>[d(r(I),{modelValue:s.data.credit,"onUpdate:modelValue":c=>s.data.credit=c,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):p("",!0),e.column.includes("positiveBalance")?(l(),f(r(k),{key:8,sortable:"",headerClass:"!bg-primary-900",field:"positiveBalance",header:"Saldo a favor"},{body:y(s=>[d(r(I),{modelValue:s.data.positiveBalance,"onUpdate:modelValue":c=>s.data.positiveBalance=c,class:"remove-format-input",inputId:"currency-us",mode:"currency",currency:"USD",locale:"en-US",readonly:"",minFractionDigits:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):p("",!0),e.column.includes("actions")?(l(),f(r(k),{key:9,headerClass:"!bg-primary-900",field:"actions",header:""},{body:y(s=>[d(r(M),{label:"Pagar",class:"!py-1.5 !border-primary-900 !text-primary-900 float-right",onClick:c=>i(s.data),outlined:""},null,8,["onClick"])]),_:1})):p("",!0)]),_:1},8,["value"])])):p("",!0),m.value.length===0?(l(),g("div",Ve,Ee)):p("",!0)],64))}},Ie={class:"flex justify-between"},je=o("i",{class:"pi pi-refresh"},null,-1),Fe=[je],Ae={__name:"PaymentDocNum",props:{orders:Array},setup(t){const{showToast:e}=V.setup(),a=S(),n=b(["DocEntry","DocNum","Customer"]),m=b(["DocEntry","DocNum","Customer","DocTotal","SalesEmployeeName","MethodShippingName","credit","positiveBalance","actions"]);b(!1);const i=b([]),_=b(!1);U(async()=>{await a.getOrdersPayment(),i.value=a.ordersPaymentsPending,_.value=!0});const v=u=>{i.value=u.orders},h=async()=>{await a.getOrdersPayment(),e({status:"success",title:"Ordenes actualizadas",message:"Las ordenes se han actualizado correctamente"})};return T(()=>a.ordersPaymentsPending,u=>{i.value=u}),(u,s)=>(l(),g(w,null,[o("div",Ie,[o("div",null,[o("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"},[P(" Facturas pendientes de pago "),o("a",{style:{cursor:"pointer"},onClick:h},Fe)])]),d(L,{type:r(O).RESPONSIBLE_PAYMENT,orders:r(a).ordersPaymentsPending,onSearch:v},null,8,["type","orders"])]),_.value?(l(),f(Be,{key:0,orders:i.value,filters:n.value,column:m.value,onAction:u.action},null,8,["orders","filters","column","onAction"])):p("",!0),d(G,{visible:r(a).showDialog,"onUpdate:visible":s[0]||(s[0]=c=>r(a).showDialog=c)},null,8,["visible"])],64))}};const Le={key:0},Re={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Ue=o("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No se han encontrado clientes ",-1),qe=[Ue],He={__name:"DataTabletCustomers",props:{customers:Array,filters:Array,column:Array},setup(t){const e=t;V.setup(),A.setup();const a=S(),n=b([]);R(()=>{n.value=e.customers});const m=i=>{a.order=i,a.showDialog=!0};return T(()=>e.customers,i=>{n.value=i}),(i,_)=>(l(),g(w,null,[n.value.length>0?(l(),g("div",Le,[d(r(q),{value:n.value,rowsPerPageOptions:[5,10,20,50],rows:5,paginator:"",dataKey:"id",filterDisplay:"row",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}"},{default:y(()=>[d(r(k),{sortable:"",headerClass:"!bg-primary-900",field:"CardName",header:"Cliente",style:{"max-width":"300px"}},{body:y(v=>[d(r(x),{icon:"pi pi-user",value:v.data.CardName,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1}),d(r(k),{sortable:"",headerClass:"!bg-primary-900",field:"CardCode",header:"N° Documento",style:{"max-width":"300px"}},{body:y(v=>[d(r(x),{icon:"pi pi-user",value:v.data.CardCode,class:"!font-normal !text-md !px-3 !bg-primary-100 !text-primary-900"},null,8,["value"])]),_:1}),e.column.includes("actions")?(l(),f(r(k),{key:0,headerClass:"!bg-primary-900",field:"actions",header:""},{body:y(v=>[d(r(M),{label:"Pagar",class:"!py-1.5 !border-primary-900 !text-primary-900 float-right",onClick:h=>m(v.data),outlined:""},null,8,["onClick"])]),_:1})):p("",!0)]),_:1},8,["value"])])):p("",!0),n.value.length===0?(l(),g("div",Re,qe)):p("",!0)],64))}},Ge={class:"flex justify-between"},Ke=o("div",null,[o("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"}," Registrar pago a cuenta ")],-1),ze={__name:"PaymentAccount",setup(t){V.setup();const e=S(),a=b(["Customer","NumAcount"]),n=b(["Customer","NumAcount","actions"]),m=b(!1),i=b([]),_=b([]),v=b(!1);U(async()=>{await e.getCustomers(),i.value=e.customers,_.value=e.customers,v.value=!0});const h=u=>{i.value=u.customers};return(u,s)=>(l(),g(w,null,[o("div",Ge,[Ke,d(L,{type:"customers",customers:_.value,onSearch:h},null,8,["customers"])]),v.value?(l(),f(He,{key:0,customers:i.value,filters:a.value,column:n.value,onAction:u.action},null,8,["customers","filters","column","onAction"])):p("",!0),d(G,{visible:m.value,"onUpdate:visible":s[0]||(s[0]=c=>m.value=c)},null,8,["visible"])],64))}};const We={class:"px-3"},nt={__name:"Payments",setup(t){return(e,a)=>(l(),g("div",We,[d(r(Y),null,{default:y(()=>[d(r(E),{header:"Facturas pendientes de pago"},{default:y(()=>[d(Ae)]),_:1}),d(r(E),{header:"Registrar pago a cuenta"},{default:y(()=>[d(ze)]),_:1})]),_:1})]))}};export{nt as default};
