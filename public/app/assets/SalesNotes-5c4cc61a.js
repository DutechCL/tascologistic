import{s as z,a as Z}from"./tabpanel.esm-8ee6f7e5.js";import{e as x,k as j,l as q,o as i,m as y,w as l,h as t,i as N,t as $,a,u as e,c as _,F as A,p as B,s as D,q as K,v as m,x as Q,y as F,z as ee}from"./index-a463fc81.js";import{a as P,b as H,s as r}from"./tag.esm-47cdb6e9.js";import{U as E,_ as G,a as R}from"./UseSearch-4b86e484.js";import{C as ae,_ as te}from"./DialogReportProblem-2c726ceb.js";import{u as J}from"./OrdersApiService-dcad317b.js";import{T as re}from"./multiselect.esm-d49c92b3.js";import"./index.esm-62966235.js";import"./index.esm-530eeedf.js";const se=t("h1",{class:"mb-1 text-primary-900 font-inter font-semibold text-xl"},[t("i",{class:"pi pi-eye !text-xl"}),N(" Ver Documentos ")],-1),le={class:"flex align-center mb-2"},oe={class:"text-primary-900"},ie=t("strong",{class:"mr-3 font-semibold"},"Nota de venta N°",-1),ne={class:"mt-5"},de=t("p",null," 2 archivos adjuntos ",-1),ce={class:"flex"},ue={class:"mt-2 mr-5 relative",width:"200",height:"180"},pe=["src"],me={class:"bg-gray-100"},he=t("i",{class:"pi pi-file-pdf m-2",style:{color:"#F40F02"}},null,-1),be={class:"font-normal text-sm"},ge=["onClick"],W={__name:"DialogDetail",props:{order:Object},setup(f,{emit:h}){const p=f,o=x([]),g=x([{name:"Documento 1",url:"http://ocw.uv.es/ingenieria-y-arquitectura/programacionmultimedia/t2-1-css.pdf"},{name:"Documento 2",url:"http://ocw.uv.es/ingenieria-y-arquitectura/programacionmultimedia/t2-1-css.pdf"}]),b=d=>{window.open(d,"_blank")};j(()=>{o.value=p.order}),q(()=>p.order,d=>{o.value=d});const s=()=>{h("visible",{visibleReport:!1})};return(d,v)=>(i(),y(e(K),{modal:"",header:" ",style:{width:"70vw"}},{default:l(()=>[t("div",null,[se,t("div",le,[t("p",oe,[ie,N($(o.value.DocNum),1)]),a(e(P),{icon:"pi pi-shopping-bag",value:o.value.MethodShippingName,class:"ml-3 tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),a(e(P),{icon:"pi pi-user",value:o.value.Customer.CardName,class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"]),t("div",ne,[de,t("div",ce,[(i(!0),_(A,null,B(g.value,c=>(i(),_("div",ue,[t("embed",{class:"w-full",src:c.url,type:"application/pdf"},null,8,pe),t("div",me,[he,t("span",be,$(c.name),1)]),t("a",{class:"mask-pdf",onClick:O=>b(c.url)},null,8,ge)]))),256))])])]),a(e(D),{label:"Cerrar",onClick:s,class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}},_e=t("h1",{class:"mb-1 text-primary-900 font-inter font-semibold text-xl"},[t("i",{class:"pi pi-eye !text-xl"}),N(" Ver observaciones ")],-1),fe={class:"flex align-center mb-2"},ve={class:"text-primary-900"},ye=t("strong",{class:"mr-3 font-semibold"},"Nota de venta N°",-1),Ce={class:"mr-3 tag-radius tag-rounded-blue tag-font-method"},xe=["innerHTML"],De={class:"mt-5"},$e=t("strong",null,"NOTA:",-1),ke=["innerHTML"],X={__name:"DialogDetailObservation",props:{order:String},setup(f,{emit:h}){const p=f,o=x([]);j(()=>{o.value=p.order}),q(()=>p.order,d=>{o.value=d});const g=()=>{h("visible",{visibleReport:!1})},b=d=>new DOMParser().parseFromString(d,"text/html").body.innerText,s=d=>d.replace(/\r/g,"<br>").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");return(d,v)=>(i(),y(e(K),{modal:"",header:" ",style:{width:"70vw"}},{default:l(()=>[t("div",null,[_e,t("div",fe,[t("p",ve,[ye,N($(o.value.DocNum),1)]),a(e(P),{icon:"pi pi-shopping-cart",value:o.value.MethodShippingName,class:"ml-3 tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),a(e(P),{icon:"pi pi-user",value:o.value.Customer.CardName,class:"tag-radius tag-rounded-blue tag-font-method mb-5"},null,8,["value"]),o.value.HasProblems?m("",!0):(i(),y(e(H),{key:0,tableStyle:"min-width: 50rem",filters:"filters",value:o.value.OrderItems},{default:l(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"Quantity",header:"Cantidad"},{body:l(c=>[t("p",null,$(c.data.Quantity)+" Unidad",1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"ItemCode",header:"SKU"}),a(e(r),{headerClass:"!bg-primary-900",field:"ItemDescription",header:"Producto"}),a(e(r),{headerClass:"!bg-primary-900",field:"Problems",header:"Problema"},{body:l(c=>[(i(!0),_(A,null,B(c.data.Problems,(O,w)=>(i(),_("p",{key:w},[t("span",Ce,$(b(O.ProblemName)),1)]))),128))]),_:1})]),_:1},8,["value"])),t("div",null,[o.value.HasProblems?(i(),y(e(H),{key:0,tableStyle:"min-width: 50rem",filters:"filters",value:o.value.Problems},{default:l(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"ProblemName",header:"Probelma"},{body:l(c=>[t("p",null,$(c.data.ProblemName),1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"Other",header:"Descripcion"},{body:l(c=>[t("p",{innerHTML:c.data.Other},null,8,xe)]),_:1})]),_:1},8,["value"])):m("",!0)]),t("div",De,[$e,N(),t("span",{innerHTML:s(o.value.Comments)},null,8,ke)])]),a(e(D),{label:"Cerrar",onClick:g,class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}};function Y(){const f=x(!1),h=x({}),p=x("");return{visible:f,selectedOrder:h,currentDialog:p,openDialog:(b,s)=>{p.value=b,f.value=!0,h.value={...s}},closeDialog:({value:b})=>{b||(h.value={},f.value=f.visible)}}}const Ne={class:"flex justify-between"},Oe=t("div",null,[t("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"}," Notas de venta ")],-1),we={key:0},Me=t("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Aquí ",-1),Se={class:"flex"},Pe={key:1},Te=t("div",null,[t("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Retiro / Despacho ")],-1),Ve={class:"flex"},He={key:5,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Le=t("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No se han encontrado ordenes ",-1),Fe=[Le],Ae={__name:"ToManage",props:{ListOrders:Array,search:String},setup(f){const h=f,{showToast:p}=re.setup(),{showConfirm:o}=ae.setup(),g=J(),{ListOrders:b}=Q(h),{visible:s,selectedOrder:d,currentDialog:v,openDialog:c,closeDialog:O}=Y(),{ordersHere:w,ordersPickupAndDelivery:V,allOrdersPickupAndDelivery:U,allOrdersHere:I,search:M}=E(b),T=k=>{console.log(k),k.type==="Here"?w.value=k.orders:V.value=k.orders},u=x(!1),L=async(k,S=1)=>{if(await o())try{let C=await g.postActionOrder(k.id,S);p({status:C.status,message:C.message})}catch(C){C.response&&p({status:C.response.data.status,message:C.response.data.message})}else p({status:"info",message:"Proceso cancelado"})};return(k,S)=>(i(),_(A,null,[t("div",Ne,[Oe,a(G,{onSearch:e(M)},null,8,["onSearch"])]),e(w).length>0?(i(),_("div",we,[Me,t("div",Se,[a(R,{typeOrders:"Here",allOrders:e(I),onFilter:T},null,8,["allOrders"])]),a(e(H),{onOnPage:k.loadMoreData,class:"mb-20",value:e(w),tableStyle:"min-width: 50rem",filters:"filters",paginator:"",rows:5,dataKey:"id",filterDisplay:"row",loading:u.value},{default:l(()=>[a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocNum",header:"Nota de venta"},{body:l(n=>[N(" N° "+$(n.data.DocNum),1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocDate",header:"Fecha"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocTime",header:"Hora"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"Customer.CardName",header:"Cliente"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocTotal",header:"Monto total"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"MethodShippingName",header:"Método entrega"},{body:l(n=>[a(e(P),{Tag:"",icon:"pi pi-shopping-cart",value:n.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:" Observación"},{body:l(n=>[a(e(D),{icon:"pi pi-eye",onClick:C=>e(c)("observation",n.data),class:"!font-normal !text-primary-900",label:"Ver observación",link:""},null,8,["onClick"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:""},{body:l(n=>[a(e(D),{onClick:C=>L(n.data),label:"Informado",class:"!py-1.5 !border-primary-900 !text-primary-900",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["onOnPage","value","loading"])])):m("",!0),e(V).length>0?(i(),_("div",Pe,[Te,t("div",Ve,[a(R,{allOrders:e(U),typeOrders:"Pickup",onFilter:T},null,8,["allOrders"])]),a(e(H),{onOnPage:k.loadMoreData,value:e(V),tableStyle:"min-width: 50rem",filters:"filters",paginator:"",rows:5,dataKey:"id",filterDisplay:"row",loading:u.value},{default:l(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta",sortable:""},{body:l(n=>[N(" N° "+$(n.data.DocNum),1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocDate",header:"Fecha"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocTime",header:"Hora"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"Customer.CardName",header:"Cliente"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocTotal",header:"Monto total"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"MethodShippingName",header:"Método entrega"},{body:l(n=>[a(e(P),{Tag:"",icon:n.data.MethodShippingId===2?"pi pi-home":"pi pi-truck",value:n.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["icon","value"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:"Documentos"},{body:l(n=>[a(e(D),{icon:"pi pi-eye",onClick:C=>e(c)("detail",n.data),class:"!font-normal !text-primary-900",label:"Ver documentos",link:""},null,8,["onClick"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:""},{body:l(n=>[a(e(D),{label:"Rechazar",onClick:C=>e(c)("reportProblem",n.data),class:"!py-1.5 mr-3 !border-primary-900 !text-primary-900",outlined:""},null,8,["onClick"]),a(e(D),{label:"Autorizar",onClick:C=>L(n.data,3),class:"!py-1.5 !border-primary-900 !text-primary-900",outlined:""},null,8,["onClick"])]),_:1})]),_:1},8,["onOnPage","value","loading"])])):m("",!0),e(v)==="detail"?(i(),y(W,{key:2,visible:e(s),"onUpdate:visible":S[0]||(S[0]=n=>F(s)?s.value=n:null),order:e(d),onVisible:e(O)},null,8,["visible","order","onVisible"])):m("",!0),e(v)==="observation"?(i(),y(X,{key:3,visible:e(s),"onUpdate:visible":S[1]||(S[1]=n=>F(s)?s.value=n:null),order:e(d),onVisible:e(O)},null,8,["visible","order","onVisible"])):m("",!0),e(v)==="reportProblem"?(i(),y(te,{key:4,visible:e(s),"onUpdate:visible":S[2]||(S[2]=n=>F(s)?s.value=n:null),typeProblems:"cda",order:e(d),onVisible:e(O)},null,8,["visible","order","onVisible"])):m("",!0),e(w).length===0&&e(V).length===0?(i(),_("div",He,Fe)):m("",!0)],64))}},Ue={class:"flex justify-between"},Ie=t("div",null,[t("h1",{class:"mb-2 text-primary-900 font-inter font-semibold text-2xl"}," Notas de venta ")],-1),Re={key:0},je=t("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Aquí ",-1),qe={class:"flex"},ze={key:1},Be=t("div",null,[t("h2",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"}," Retiro / Despacho ")],-1),Ke={class:"flex"},Qe={key:4,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},Ee=t("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No se han encontrado ordenes ",-1),Ge=[Ee],Je={__name:"Managed",props:{ListOrders:Array,search:String},setup(f){const h=f,{ListOrders:p}=Q(h),{visible:o,selectedOrder:g,currentDialog:b,openDialog:s,closeDialog:d}=Y(),{ordersHere:v,ordersPickupAndDelivery:c,allOrdersPickupAndDelivery:O,allOrdersHere:w,search:V}=E(p),U=M=>{M.type==="Here"?v.value=M.orders:c.value=M.orders},I=x(!1);return(M,T)=>(i(),_(A,null,[t("div",Ue,[Ie,a(G,{onSearch:e(V)},null,8,["onSearch"])]),e(v).length>0?(i(),_("div",Re,[je,t("div",qe,[a(R,{typeOrders:"Here",allOrders:e(w),onFilter:U},null,8,["allOrders"])]),a(e(H),{onOnPage:M.loadMoreData,class:"mb-20",value:e(v),tableStyle:"min-width: 50rem",filters:"filters",paginator:"",rows:5,dataKey:"id",filterDisplay:"row",loading:I.value},{default:l(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:l(u=>[N(" N° "+$(u.data.DocNum),1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocDate",header:"Fecha"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocTime",header:"Hora"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"Customer.CardName",header:"Cliente"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocTotal",header:"Monto total"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"MethodShippingName",header:"Método entrega"},{body:l(u=>[a(e(P),{Tag:"",icon:"pi pi-shopping-cart",value:u.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:"Observación"},{body:l(u=>[a(e(D),{icon:"pi pi-eye",onClick:L=>e(s)("observation",u.data),class:"!font-normal !text-primary-900",label:"Ver observación",link:""},null,8,["onClick"])]),_:1})]),_:1},8,["onOnPage","value","loading"])])):m("",!0),e(c).length>0?(i(),_("div",ze,[Be,t("div",Ke,[a(R,{typeOrders:"Pickup",allOrders:e(O),onFilter:U},null,8,["allOrders"])]),a(e(H),{onOnPage:M.loadMoreData,value:e(c),tableStyle:"min-width: 50rem",filters:"filters",paginator:"",rows:5,dataKey:"id",filterDisplay:"row",loading:I.value},{default:l(()=>[a(e(r),{headerClass:"!bg-primary-900",field:"DocNum",header:"Nota de venta"},{body:l(u=>[N(" N° "+$(u.data.DocNum),1)]),_:1}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocDate",header:"Fecha"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocTime",header:"Hora"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"Customer.CardName",header:"Cliente"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"DocTotal",header:"Monto total"}),a(e(r),{headerClass:"!bg-primary-900",sortable:"",field:"MethodShippingName",header:"Método entrega"},{body:l(u=>[a(e(P),{Tag:"",icon:"pi pi-shopping-cart",value:u.data.MethodShippingName,rounded:"",class:"tag-radius tag-rounded-blue tag-font-method"},null,8,["value"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:"Documentos"},{body:l(u=>[a(e(D),{icon:"pi pi-eye",onClick:L=>e(s)("detail",u.data),class:"!font-normal !text-primary-900",label:"Ver documentos",link:""},null,8,["onClick"])]),_:1}),a(e(r),{headerClass:"!bg-primary-900",field:"note",header:" Observación"},{body:l(u=>[u.data.HasProblems?(i(),y(e(D),{key:0,icon:"pi pi-eye",onClick:L=>e(s)("observation",u.data),class:"!font-normal !text-primary-900",label:"Ver observación",link:""},null,8,["onClick"])):m("",!0)]),_:1})]),_:1},8,["onOnPage","value","loading"])])):m("",!0),e(b)==="detail"?(i(),y(W,{key:2,visible:e(o),"onUpdate:visible":T[0]||(T[0]=u=>F(o)?o.value=u:null),order:e(g),onVisible:e(d)},null,8,["visible","order","onVisible"])):m("",!0),e(b)==="observation"?(i(),y(X,{key:3,visible:e(o),"onUpdate:visible":T[1]||(T[1]=u=>F(o)?o.value=u:null),order:e(g),onVisible:e(d)},null,8,["visible","order","onVisible"])):m("",!0),e(v).length===0&&e(c).length===0?(i(),_("div",Qe,Ge)):m("",!0)],64))}};const We={class:"px-3"},Xe={key:0,class:"text-center",style:{color:"#259bd7"}},Ye=t("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},null,-1),Ze=[Ye],da={__name:"SalesNotes",setup(f){const h=J(),p=x([]),o=x([]),g=x(!1),b=()=>{p.value=h.orders.filter(s=>s.is_managed==!1||s.MethodShippingId===1&&s.is_managed==!1).sort((s,d)=>new Date(d.updated_at)-new Date(s.updated_at)),o.value=h.orders.filter(s=>s.is_managed==!0).sort((s,d)=>new Date(d.updated_at)-new Date(s.updated_at)),g.value=!0};return j(async()=>{await h.getOrdersCda(),b(),q(h.orders,()=>{b()})}),(s,d)=>(i(),_(A,null,[t("div",We,[a(e(Z),null,{default:l(()=>[a(e(z),{header:"Por gestionar"},{default:l(()=>[g.value?m("",!0):(i(),_("div",Xe,Ze)),g.value?(i(),y(Ae,{key:1,ListOrders:p.value},null,8,["ListOrders"])):m("",!0)]),_:1}),a(e(z),{header:"Gestionadas"},{default:l(()=>[g.value?(i(),y(Je,{key:0,ListOrders:o.value},null,8,["ListOrders"])):m("",!0)]),_:1})]),_:1})]),a(e(ee))],64))}};export{da as default};
