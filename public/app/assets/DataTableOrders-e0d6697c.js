import{c as B,s as i,b as C,a as O}from"./tag.esm-77e63657.js";import{e as b,l as N,o as p,c as f,h as c,a as r,u as e,I as E,m as v,w as d,t as w,v as P,p as x,F as I,s as S,q as V,i as $}from"./index-781ac360.js";import{u as L}from"./OrdersApiService-575f0a71.js";import{_ as R,c as D}from"./FilterMultiSelect-39698c15.js";const H={class:"card flex flex-wrap justify-content-center gap-3"},M={class:"p-input-icon-left relative"},T=c("i",{class:"pi pi-search absolute !top-5",style:{color:"#259BD7"}},null,-1),J={__name:"Search",props:{orders:Object},setup(l,{emit:u}){const o=l,n=b(o.orders),m=b(o.orders),h=b(null);N(()=>o.orders,a=>{n.value=a,m.value=a}),N(()=>h.value,a=>{g(a)});const g=a=>{n.value=y(m.value,a),u("search",{orders:n.value})};function y(a,t){return a.filter(s=>s.DocNum.toString().includes(t.toString())||s.Customer.CardName.toLowerCase().includes(t.toLowerCase()))}return(a,t)=>(p(),f("div",H,[c("span",M,[T,r(e(B),{class:"!py-2 !rounded-xl !bg-secundary-300 !border-none",modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),placeholder:"Buscar"},null,8,["modelValue"])])]))}},k=L(),F=E("ordersBills",{state:()=>({listOrders:[],order:[],visibleDialog:!1}),getters:{orders:l=>l.listOrders},actions:{async getOrdersBillPickupAndHere(){let l=await k.getOrdersBillPickupAndHere();this.listOrders=l.data},async getOrdersBillDelivery(){let l=await k.getOrdersBillDelivery();this.listOrders=l.data},issueInvoiceOrReceipt(l){console.log(l)},showDetailOrder(l){this.order=l,this.visibleDialog=!0}}}),j=c("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"},[c("i",{class:"pi pi-eye !text-xl"}),$(" Ver detalles ")],-1),A=c("div",{class:"mt-2 mb-1 text-primary-900 font-semi-bold"},[c("p",null,"Productos")],-1),W={__name:"DialogDetail",setup(l){var g;const u=F(),o=b(u.order),n=b((g=u.order)==null?void 0:g.OrderItems),m=()=>{u.visibleDialog=!1},h=y=>{switch(y.pivot.task){case"reviewer":return"Revisado por:";case"picker":return"Preparado por";case"cda":return"Autorizado por"}};return(y,a)=>(p(),v(e(V),{modal:"",header:" ",maximizable:"",style:{width:"70vw"}},{default:d(()=>[c("div",null,[j,c("p",null,"Revisa aquí los detalles de la nota de venta N° "+w(o.value.DocNum),1)]),A,r(e(C),{tableStyle:"min-width: 50rem",filters:"filters",value:n.value},{default:d(()=>[r(e(i),{headerClass:"!bg-primary-900",field:"date",header:"Cantidad"},{body:d(t=>[c("p",null,w(t.data.Quantity)+" Unidades",1)]),_:1}),r(e(i),{headerClass:"!bg-primary-900",field:"ItemCode",header:"SKU"}),r(e(i),{headerClass:"!bg-primary-900",field:"ItemDescription",header:"Producto"})]),_:1},8,["value"]),r(e(C),{class:"pt-5",tableStyle:"min-width: 50rem",value:[o.value]},{default:d(()=>[r(e(i),{headerClass:"!bg-primary-900",field:"SalesEmployeeName",header:"Vendedor"},{body:d(t=>{var s,_;return[(s=t.data)!=null&&s.SalesEmployeeName?(p(),v(e(O),{key:0,icon:"pi pi-user",value:(_=t.data)==null?void 0:_.SalesEmployeeName,class:"p-tag-1 tag-font-method tag-radius"},null,8,["value"])):P("",!0)]}),_:1}),(p(!0),f(I,null,x(o.value.Responsibles,t=>(p(),v(e(i),{headerClass:"!bg-primary-900",field:"responsible",header:h(t)},{body:d(s=>[t.name?(p(),v(e(O),{key:0,icon:"pi pi-user",value:t.name,class:"p-tag-1 tag-font-method tag-radius"},null,8,["value"])):P("",!0)]),_:2},1032,["header"]))),256))]),_:1},8,["value"]),r(e(S),{label:"Cerrar",onClick:m,class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}};const U={key:0},G={class:"flex"},X={__name:"DataTableOrders",props:{type:String,actions:Object,orders:Object},setup(l,{emit:u}){const o=l,n=b(o.orders),m=b(o.orders),h=a=>{switch(a.method_shipping_id){case D.METHOD_SHIPPING_DELIVERY_ID:return"pi pi-truck";case D.METHOD_SHIPPING_PICKUP_ID:return"pi pi-home";case D.METHOD_SHIPPING_HERE_ID:return"pi pi-shopping-cart";default:return"pi pi-shopping-cart"}},g=(a,t)=>{u("action",{action:a,order:t})},y=a=>{n.value=a.orders};return N(()=>o.orders,a=>{console.log(a),n.value=a,m.value=a}),(a,t)=>n.value.length>0?(p(),f("div",U,[c("div",G,[r(R,{typeOrders:"here",allOrders:m.value,onFilter:y},null,8,["allOrders"])]),r(e(C),{tableStyle:"min-width: 50rem",filters:"filters",value:n.value,paginator:"",rowsPerPageOptions:[5,10,20,50],rows:5,dataKey:"id",filterDisplay:"row",loading:a.loading,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}"},{default:d(()=>[r(e(i),{headerClass:"!bg-primary-900",sortable:"",field:"DocNum",header:"Nota de venta"},{body:d(s=>[$(" N° "+w(s.data.DocNum),1)]),_:1}),r(e(i),{headerClass:"!bg-primary-900",sortable:"",field:"DocDate",header:"Fecha"}),r(e(i),{headerClass:"!bg-primary-900",sortable:"",field:"Customer.CardName",header:"Cliente"}),r(e(i),{headerClass:"!bg-primary-900",sortable:"",field:"DocTotal",header:"Monto total"}),r(e(i),{headerClass:"!bg-primary-900",sortable:"",field:"MethodShippingName",header:"Método entrega"},{body:d(s=>[r(e(O),{icon:h(s.data),value:s.data.MethodShippingName,class:"p-tag-1 tag-font-method tag-radius"},null,8,["icon","value"])]),_:1}),r(e(i),{headerClass:"!bg-primary-900",field:"note",header:"Detalles"},{body:d(s=>[r(e(S),{icon:"pi pi-eye",onClick:_=>g("showDetailOrder",s.data),class:"!text-primary-900",label:"Ver detalles",link:""},null,8,["onClick"])]),_:1}),r(e(i),{headerClass:"!bg-primary-900",field:"client",header:"Emitir"},{body:d(s=>[(p(!0),f(I,null,x(o.actions,_=>(p(),v(e(S),{label:_.label,disabled:!_.active,onClick:K=>g(_.method,s.data),class:"!py-1.5 !border-primary-900 !text-primary-900",severity:"primary",outlined:""},null,8,["label","disabled","onClick"]))),256))]),_:1})]),_:1},8,["value","loading"])])):P("",!0)}};export{J as _,X as a,W as b,F as u};
