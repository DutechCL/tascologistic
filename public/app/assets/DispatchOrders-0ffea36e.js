import{e as d,v as D,q as B,o as c,c as p,h as a,i as O,a as n,u as t,k as w,p as m,F as k,s as E,x as N}from"./index-606661fc.js";import{T as S,C,_ as M,c as u}from"./ConfirmMixin-1b1192ee.js";import{u as V,_ as I,a as T}from"./DataTableOrders-44b5c006.js";import"./tag.esm-4f3974bd.js";import"./index.esm-3c79d59f.js";import"./OrdersApiService-33303ab1.js";import"./ApiService-773c9652.js";import"./_commonjsHelpers-725317a4.js";import"./FilterMultiSelect-54108c6b.js";import"./index.esm-b0d6902d.js";import"./index-dd28ee9b.js";const L={class:"px-8"},P={class:"flex justify-between"},R=a("i",{class:"pi pi-refresh"},null,-1),$=[R],j={key:1,style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},F=a("h1",{class:"align-center font-inter font-semibold mb-4 text-2xl text-center text-primary-900"}," No hay ordenes actualmente en este proceso ",-1),Z={__name:"DispatchOrders",setup(H){const{showToast:i}=S.setup(),{showConfirm:_}=C.setup(),s=V(),h=d(!1),r=d([]),f=e=>{r.value=e.orders},v=e=>{switch(console.log(e),e.method){case"showDetailOrder":s.showDetailOrder(e.order);break;case"processOrderBiller":b(e);break}},g=async()=>{await s.getOrdersBillDelivery(),i({status:"success",message:"Ordenes actualizadas",time:3e3})};D(()=>s.orders,e=>{r.value=s.orders});const y=()=>{r.value.length===0&&(window.location.href="/admin/dashboard/")},b=async e=>{try{if(await _()){let l=await s.processOrderBiller(e);l.status==="success"&&i({status:"success",message:l.message})}else i({status:"info",message:"Proceso cancelado"})}catch(o){console.log(o),i({status:"error",message:o.response.data.message})}},x=e=>{h.value=e.visibleDetails};return B(async()=>{await s.getOrdersBillDelivery(),r.value=s.orders}),(e,o)=>(c(),p(k,null,[a("div",L,[a("div",P,[a("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-2xl"},[O(" Despacho "),a("a",{style:{cursor:"pointer"},onClick:g},$)]),n(M,{type:t(u).RESPONSIBLE_BILLER,methodShipping:t(u).METHOD_SHIPPING_DELIVERY,orders:t(s).orders,onSearch:f},null,8,["type","methodShipping","orders"])]),n(I,{orders:r.value,actions:e.actions,onAction:v},null,8,["orders","actions"]),t(s).visibleDialog?(c(),w(T,{key:0,visible:t(s).visibleDialog,"onUpdate:visible":o[0]||(o[0]=l=>t(s).visibleDialog=l),orderDetails:t(s).order,onVisible:x},null,8,["visible","orderDetails"])):m("",!0),r.value.length===0?(c(),p("div",j,[F,n(t(E),{label:"Regresar",severity:"primary",outlined:"",onClick:y,class:"ml-3 !py-1.5"})])):m("",!0)]),n(t(N))],64))}};export{Z as default};
