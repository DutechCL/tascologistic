import{a4 as a,I as l}from"./index-193ecf8e.js";const d="http://tasco.test/",n={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};async function p(e){return(await a.get(`${d}${e}`,n)).data}async function t(e,s){return(await a.post(`${d}${e}`,s,n)).data}async function h(e,s){return(await a.put(`${d}${e}`,s,n)).data}function c(e){return{ordersHere:i(e,1),ordersPickup:i(e,2),ordersDelivery:i(e,3)}}function i(e,s){return e.filter(r=>r.MethodShippingId===s).sort((r,o)=>new Date(o.updateApp)-new Date(r.updateApp))}const O=l("orders",{state:()=>({listOrders:[],listOrdersHere:[],listOrdersPickup:[],listOrdersDelivery:[]}),getters:{orders:e=>e.listOrders,ordersHere:e=>e.listOrdersHere,ordersPickup:e=>e.listOrdersPickup,ordersDelivery:e=>e.listOrdersDelivery},actions:{async getOrdersCda(){let e=await p("api/v1/orders/available/cda");this.listOrders=e.data;const s=c(this.listOrders);return this.listOrdersHere=s.ordersHere,this.listOrdersPickup=s.ordersPickup,this.listOrdersDelivery=s.ordersDelivery,e.data},async getOrdersPickerAndReviewer(){let e=await p("api/v1/orders/available/picker-reviewer");this.listOrders=e.data;const s=c(this.listOrders);return this.listOrdersHere=s.ordersHere,this.listOrdersPickup=s.ordersPickup,this.listOrdersDelivery=s.ordersDelivery,e.data},async getOrdersByMethodShipping(e){return await t("api/v1/orders/by-method-shipping",{method_shipping_ids:e})},async getOrdersByParams(e){return(await t("api/v1/orders/by-params",e)).data},async processOrderAction(e){const s=await t("api/v1/orders/authorizer/action",e);return s.status==="success"&&this.updateOrderListByMethodShipping(s.order),s},async assingResponsible(e,s){const r=await h(`api/v1/order/${s}/assign/responsible`,e);return r.status==="success"&&this.updateOrderListByMethodShipping(r.order),r},updateOrderListByMethodShipping(e){let s;switch(e.MethodShippingId){case 1:s=this.listOrdersHere.findIndex(r=>r.id===e.id),this.listOrdersHere[s]=e;break;case 2:s=this.listOrdersPickup.findIndex(r=>r.id===e.id),this.listOrdersPickup[s]=e;break;case 3:s=this.listOrdersDelivery.findIndex(r=>r.id===e.id),this.listOrdersDelivery[s]=e;break}}}});export{t as p,O as u};
