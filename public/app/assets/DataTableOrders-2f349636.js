import{c as $,s as o,b as C,a as N}from"./tag.esm-61ea5c3c.js";import{e as h,l as P,o as p,c as f,h as n,a as r,u as e,k as E,m as v,w as d,t as x,v as w,p as k,F as O,s as S,q as V,i as I}from"./index-bab20c0d.js";import{_ as L,c as D}from"./FilterMultiSelect-9ccc00e6.js";const M={class:"card flex flex-wrap justify-content-center gap-3"},R={class:"p-input-icon-left relative"},T=n("i",{class:"pi pi-search absolute !top-5",style:{color:"#259BD7"}},null,-1),K={__name:"Search",props:{orders:Object},setup(b,{emit:g}){const i=b,l=h(i.orders),u=h(i.orders),m=h(null);P(()=>i.orders,a=>{l.value=a,u.value=a}),P(()=>m.value,a=>{y(a)});const y=a=>{l.value=c(u.value,a),g("search",{orders:l.value})};function c(a,t){return a.filter(s=>s.DocNum.toString().includes(t.toString())||s.Customer.CardName.toLowerCase().includes(t.toLowerCase()))}return(a,t)=>(p(),f("div",M,[n("span",R,[T,r(e($),{class:"!py-2 !rounded-xl !bg-secundary-300 !border-none",modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),placeholder:"Buscar"},null,8,["modelValue"])])]))}},B=n("h1",{class:"mb-4 text-primary-900 font-inter font-semibold text-xl"},[n("i",{class:"pi pi-eye !text-xl"}),I(" Ver detalles ")],-1),H=n("div",{class:"mt-2 mb-1 text-primary-900 font-semi-bold"},[n("p",null,"Productos")],-1),q={__name:"DialogDetail",props:{orderDetails:Array},setup(b,{emit:g}){const i=b,l=h([]),u=h([]),m=()=>{g("visible",{visibleDetails:!1})},y=c=>{switch(c.pivot.task){case"reviewer":return"Revisado por:";case"picker":return"Preparado por";case"cda":return"Autorizado por"}};return E(()=>{var c;l.value=i.orderDetails,u.value=(c=i.orderDetails)==null?void 0:c.OrderItems}),(c,a)=>(p(),v(e(V),{modal:"",header:" ",maximizable:"",style:{width:"70vw"}},{default:d(()=>[n("div",null,[B,n("p",null,"Revisa aquí los detalles de la nota de venta N° "+x(l.value.DocNum),1)]),H,r(e(C),{tableStyle:"min-width: 50rem",filters:"filters",value:u.value},{default:d(()=>[r(e(o),{headerClass:"!bg-primary-900",field:"date",header:"Cantidad"},{body:d(t=>[n("p",null,x(t.data.Quantity)+" Unidades",1)]),_:1}),r(e(o),{headerClass:"!bg-primary-900",field:"ItemCode",header:"SKU"}),r(e(o),{headerClass:"!bg-primary-900",field:"ItemDescription",header:"Producto"})]),_:1},8,["value"]),r(e(C),{class:"pt-5",tableStyle:"min-width: 50rem",value:[l.value]},{default:d(()=>[r(e(o),{headerClass:"!bg-primary-900",field:"SalesEmployeeName",header:"Vendedor"},{body:d(t=>{var s,_;return[(s=t.data)!=null&&s.SalesEmployeeName?(p(),v(e(N),{key:0,icon:"pi pi-user",value:(_=t.data)==null?void 0:_.SalesEmployeeName,class:"p-tag-1 tag-font-method tag-radius"},null,8,["value"])):w("",!0)]}),_:1}),(p(!0),f(O,null,k(l.value.Responsibles,t=>(p(),v(e(o),{headerClass:"!bg-primary-900",field:"responsible",header:y(t)},{body:d(s=>[t.name?(p(),v(e(N),{key:0,icon:"pi pi-user",value:t.name,class:"p-tag-1 tag-font-method tag-radius"},null,8,["value"])):w("",!0)]),_:2},1032,["header"]))),256))]),_:1},8,["value"]),r(e(S),{label:"Cerrar",onClick:m,class:"!py-2 !border-none !px-10 !bg-primary-900 float-right mt-5"})]),_:1}))}};const F={key:0},j={class:"flex"},z={__name:"DataTableOrders",props:{type:String,actions:Object,orders:Object},setup(b,{emit:g}){const i=b,l=h(i.orders),u=h(i.orders),m=a=>{switch(a.MethodShippingId){case D.METHOD_SHIPPING_DELIVERY_ID:return"pi pi-truck";case D.METHOD_SHIPPING_PICKUP_ID:return"pi pi-home";case D.METHOD_SHIPPING_HERE_ID:return"pi pi-shopping-cart";default:return"pi pi-shopping-cart"}},y=(a,t)=>{g("action",{action:a,order:t})},c=a=>{l.value=a.orders};return P(()=>i.orders,a=>{console.log(a),l.value=a,u.value=a}),(a,t)=>l.value.length>0?(p(),f("div",F,[n("div",j,[r(L,{typeOrders:"here",allOrders:u.value,onFilter:c},null,8,["allOrders"])]),r(e(C),{tableStyle:"min-width: 50rem",filters:"filters",value:l.value,paginator:"",rowsPerPageOptions:[5,10,20,50],rows:5,dataKey:"id",filterDisplay:"row",loading:a.loading,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}"},{default:d(()=>[r(e(o),{headerClass:"!bg-primary-900",sortable:"",field:"DocNum",header:"Nota de venta"},{body:d(s=>[I(" N° "+x(s.data.DocNum),1)]),_:1}),r(e(o),{headerClass:"!bg-primary-900",sortable:"",field:"DocDate",header:"Fecha"}),r(e(o),{headerClass:"!bg-primary-900",sortable:"",field:"Customer.CardName",header:"Cliente"}),r(e(o),{headerClass:"!bg-primary-900",sortable:"",field:"DocTotal",header:"Monto total"}),r(e(o),{headerClass:"!bg-primary-900",sortable:"",field:"MethodShippingName",header:"Método entrega"},{body:d(s=>[r(e(N),{icon:m(s.data),value:s.data.MethodShippingName,class:"p-tag-1 tag-font-method tag-radius"},null,8,["icon","value"])]),_:1}),r(e(o),{headerClass:"!bg-primary-900",field:"note",header:"Detalles"},{body:d(s=>[r(e(S),{icon:"pi pi-eye",onClick:_=>y("showDetailOrder",s.data),class:"!text-primary-900",label:"Ver detalles",link:""},null,8,["onClick"])]),_:1}),r(e(o),{headerClass:"!bg-primary-900",field:"client",header:"Emitir"},{body:d(s=>[(p(!0),f(O,null,k(i.actions,_=>(p(),v(e(S),{label:_.label,disabled:!_.active,class:"!py-1.5 !border-primary-900 !text-primary-900",severity:"primary",outlined:""},null,8,["label","disabled"]))),256))]),_:1})]),_:1},8,["value","loading"])])):w("",!0)}};export{K as _,z as a,q as b};
